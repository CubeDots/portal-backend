{"ast":null,"code":"var _jsxFileName = \"/var/www/html/cuengine-portal/src/components/AnimationOnScroll.js\";\nimport React, { Component } from \"react\";\nimport throttle from \"lodash.throttle\";\nimport PropTypes from \"prop-types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class AnimationOnScroll extends Component {\n  constructor(props) {\n    super(props);\n    this.serverSide = typeof window === \"undefined\";\n    this.listener = throttle(this.handleScroll.bind(this), 50);\n    this.visibility = {\n      onScreen: false,\n      inViewport: false\n    };\n    this.state = {\n      classes: \"animated\",\n      style: {\n        animationDuration: `${this.props.duration}s`,\n        opacity: this.props.initiallyVisible ? 1 : 0\n      }\n    };\n  }\n\n  getElementTop(elm) {\n    var yPos = 0;\n\n    while (elm && elm.offsetTop !== undefined && elm.clientTop !== undefined) {\n      yPos += elm.offsetTop + elm.clientTop;\n      elm = elm.offsetParent;\n    }\n\n    return yPos;\n  }\n\n  getScrollPos() {\n    if (this.scrollableParent.pageYOffset !== undefined) {\n      return this.scrollableParent.pageYOffset;\n    }\n\n    return this.scrollableParent.scrollTop;\n  }\n\n  getScrollableParentHeight() {\n    if (this.scrollableParent.innerHeight !== undefined) {\n      return this.scrollableParent.innerHeight;\n    }\n\n    return this.scrollableParent.clientHeight;\n  }\n\n  getViewportTop() {\n    return this.getScrollPos() + this.props.offset;\n  }\n\n  getViewportBottom() {\n    return this.getScrollPos() + this.getScrollableParentHeight() - this.props.offset;\n  }\n\n  isInViewport(y) {\n    return y >= this.getViewportTop() && y <= this.getViewportBottom();\n  }\n\n  isAboveViewport(y) {\n    return y < this.getViewportTop();\n  }\n\n  isBelowViewport(y) {\n    return y > this.getViewportBottom();\n  }\n\n  inViewport(elementTop, elementBottom) {\n    return this.isInViewport(elementTop) || this.isInViewport(elementBottom) || this.isAboveViewport(elementTop) && this.isBelowViewport(elementBottom);\n  }\n\n  onScreen(elementTop, elementBottom) {\n    return !this.isAboveScreen(elementBottom) && !this.isBelowScreen(elementTop);\n  }\n\n  isAboveScreen(y) {\n    return y < this.getScrollPos();\n  }\n\n  isBelowScreen(y) {\n    return y > this.getScrollPos() + this.getScrollableParentHeight();\n  }\n\n  getVisibility() {\n    const elementTop = this.getElementTop(this.node) - this.getElementTop(this.scrollableParent);\n    const elementBottom = elementTop + this.node.clientHeight;\n    return {\n      inViewport: this.inViewport(elementTop, elementBottom),\n      onScreen: this.onScreen(elementTop, elementBottom)\n    };\n  }\n\n  componentDidMount() {\n    if (!this.serverSide) {\n      const parentSelector = this.props.scrollableParentSelector;\n      this.scrollableParent = parentSelector ? document.querySelector(parentSelector) : window;\n\n      if (this.scrollableParent && this.scrollableParent.addEventListener) {\n        this.scrollableParent.addEventListener(\"scroll\", this.listener);\n      } else {\n        console.warn(`Cannot find element by locator: ${this.props.scrollableParentSelector}`);\n      }\n\n      if (this.props.animatePreScroll) {\n        this.handleScroll();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.delayedAnimationTimeout);\n    clearTimeout(this.callbackTimeout);\n\n    if (window && window.removeEventListener) {\n      window.removeEventListener(\"scroll\", this.listener);\n    }\n  }\n\n  visibilityHasChanged(previousVis, currentVis) {\n    return previousVis.inViewport !== currentVis.inViewport || previousVis.onScreen !== currentVis.onScreen;\n  }\n\n  animate(animation, callback) {\n    this.delayedAnimationTimeout = setTimeout(() => {\n      this.animating = true;\n      this.setState({\n        classes: `animated ${animation}`,\n        style: {\n          animationDuration: `${this.props.duration}s`\n        }\n      });\n      this.callbackTimeout = setTimeout(callback, this.props.duration * 1000);\n    }, this.props.delay);\n  }\n\n  animateIn(callback) {\n    this.animate(this.props.animateIn, () => {\n      if (!this.props.animateOnce) {\n        this.setState({\n          style: {\n            animationDuration: `${this.props.duration}s`,\n            opacity: 1\n          }\n        });\n        this.animating = false;\n      }\n\n      const vis = this.getVisibility();\n\n      if (callback) {\n        callback(vis);\n      }\n    });\n  }\n\n  animateOut(callback) {\n    this.animate(this.props.animateOut, () => {\n      this.setState({\n        classes: \"animated\",\n        style: {\n          animationDuration: `${this.props.duration}s`,\n          opacity: 0\n        }\n      });\n      const vis = this.getVisibility();\n\n      if (vis.inViewport && this.props.animateIn) {\n        this.animateIn(this.props.afterAnimatedIn);\n      } else {\n        this.animating = false;\n      }\n\n      if (callback) {\n        callback(vis);\n      }\n    });\n  }\n\n  handleScroll() {\n    if (!this.animating) {\n      const currentVis = this.getVisibility();\n\n      if (this.visibilityHasChanged(this.visibility, currentVis)) {\n        clearTimeout(this.delayedAnimationTimeout);\n\n        if (!currentVis.onScreen) {\n          this.setState({\n            classes: \"animated\",\n            style: {\n              animationDuration: `${this.props.duration}s`,\n              opacity: this.props.initiallyVisible ? 1 : 0\n            }\n          });\n        } else if (currentVis.inViewport && this.props.animateIn) {\n          this.animateIn(this.props.afterAnimatedIn);\n        } else if (currentVis.onScreen && this.visibility.inViewport && this.props.animateOut && this.state.style.opacity === 1) {\n          this.animateOut(this.props.afterAnimatedOut);\n        }\n\n        this.visibility = currentVis;\n      }\n    }\n  }\n\n  render() {\n    var classes = this.props.className ? `${this.props.className} ${this.state.classes}` : this.state.classes;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        this.node = node;\n      },\n      className: classes,\n      style: Object.assign({}, this.state.style, this.props.style),\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nAnimationOnScroll.defaultProps = {\n  offset: 150,\n  duration: 1,\n  initiallyVisible: false,\n  delay: 0,\n  animateOnce: false,\n  animatePreScroll: true\n};\nAnimationOnScroll.propTypes = {\n  animateIn: PropTypes.string,\n  animateOut: PropTypes.string,\n  offset: PropTypes.number,\n  duration: PropTypes.number,\n  delay: PropTypes.number,\n  initiallyVisible: PropTypes.bool,\n  animateOnce: PropTypes.bool,\n  style: PropTypes.object,\n  scrollableParentSelector: PropTypes.string,\n  className: PropTypes.string,\n  animatePreScroll: PropTypes.bool\n};","map":{"version":3,"sources":["/var/www/html/cuengine-portal/src/components/AnimationOnScroll.js"],"names":["React","Component","throttle","PropTypes","AnimationOnScroll","constructor","props","serverSide","window","listener","handleScroll","bind","visibility","onScreen","inViewport","state","classes","style","animationDuration","duration","opacity","initiallyVisible","getElementTop","elm","yPos","offsetTop","undefined","clientTop","offsetParent","getScrollPos","scrollableParent","pageYOffset","scrollTop","getScrollableParentHeight","innerHeight","clientHeight","getViewportTop","offset","getViewportBottom","isInViewport","y","isAboveViewport","isBelowViewport","elementTop","elementBottom","isAboveScreen","isBelowScreen","getVisibility","node","componentDidMount","parentSelector","scrollableParentSelector","document","querySelector","addEventListener","console","warn","animatePreScroll","componentWillUnmount","clearTimeout","delayedAnimationTimeout","callbackTimeout","removeEventListener","visibilityHasChanged","previousVis","currentVis","animate","animation","callback","setTimeout","animating","setState","delay","animateIn","animateOnce","vis","animateOut","afterAnimatedIn","afterAnimatedOut","render","className","Object","assign","children","defaultProps","propTypes","string","number","bool","object"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport throttle from \"lodash.throttle\";\nimport PropTypes from \"prop-types\";\n\nexport default class AnimationOnScroll extends Component {\n\n  constructor(props) {\n    super(props);\n    this.serverSide = typeof window === \"undefined\";\n    this.listener = throttle(this.handleScroll.bind(this), 50);\n    this.visibility = {\n      onScreen: false,\n      inViewport: false\n    };\n\n    this.state = {\n      classes: \"animated\",\n      style: {\n        animationDuration: `${this.props.duration}s`,\n        opacity: this.props.initiallyVisible ? 1 : 0\n      }\n    };\n  }\n\n  getElementTop(elm) {\n    var yPos = 0;\n    while (elm && elm.offsetTop !== undefined && elm.clientTop !== undefined) {\n      yPos += (elm.offsetTop + elm.clientTop);\n      elm = elm.offsetParent;\n    }\n    return yPos;\n  }\n\n  getScrollPos() {\n    if (this.scrollableParent.pageYOffset !== undefined) {\n      return this.scrollableParent.pageYOffset;\n    }\n    return this.scrollableParent.scrollTop;\n  }\n\n  getScrollableParentHeight() {\n    if (this.scrollableParent.innerHeight !== undefined) {\n      return this.scrollableParent.innerHeight;\n    }\n    return this.scrollableParent.clientHeight;\n  }\n\n  getViewportTop() {\n    return this.getScrollPos() + this.props.offset;\n  }\n\n  getViewportBottom() {\n    return this.getScrollPos() + this.getScrollableParentHeight() - this.props.offset;\n  }\n\n  isInViewport(y) {\n    return y >= this.getViewportTop() && y <= this.getViewportBottom();\n  }\n\n  isAboveViewport(y) {\n    return y < this.getViewportTop();\n  }\n\n  isBelowViewport(y) {\n    return y > this.getViewportBottom();\n  }\n\n  inViewport(elementTop, elementBottom) {\n    return this.isInViewport(elementTop) || this.isInViewport(elementBottom) ||\n      (this.isAboveViewport(elementTop) && this.isBelowViewport(elementBottom));\n  }\n\n  onScreen(elementTop, elementBottom) {\n    return !this.isAboveScreen(elementBottom) && !this.isBelowScreen(elementTop);\n  }\n\n  isAboveScreen(y) {\n    return y < this.getScrollPos();\n  }\n\n  isBelowScreen(y) {\n    return y > this.getScrollPos() + this.getScrollableParentHeight();\n  }\n\n  getVisibility() {\n    const elementTop = this.getElementTop(this.node) - this.getElementTop(this.scrollableParent);\n    const elementBottom = elementTop + this.node.clientHeight;\n    return {\n      inViewport: this.inViewport(elementTop, elementBottom),\n      onScreen: this.onScreen(elementTop, elementBottom)\n    };\n  }\n\n  componentDidMount() {\n    if(!this.serverSide) {\n      const parentSelector = this.props.scrollableParentSelector\n      this.scrollableParent = parentSelector ? document.querySelector(parentSelector) : window;\n      if (this.scrollableParent && this.scrollableParent.addEventListener) {\n        this.scrollableParent.addEventListener(\"scroll\", this.listener);\n      } else {\n        console.warn(`Cannot find element by locator: ${this.props.scrollableParentSelector}`);\n      }\n      if (this.props.animatePreScroll) {\n        this.handleScroll();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.delayedAnimationTimeout);\n    clearTimeout(this.callbackTimeout);\n    if (window && window.removeEventListener) {\n      window.removeEventListener(\"scroll\", this.listener);\n    }\n  }\n\n  visibilityHasChanged(previousVis, currentVis) {\n    return previousVis.inViewport !== currentVis.inViewport ||\n      previousVis.onScreen !== currentVis.onScreen;\n  }\n\n  animate(animation, callback) {\n    this.delayedAnimationTimeout = setTimeout(() => {\n      this.animating = true;\n      this.setState({\n        classes: `animated ${animation}`,\n        style: {\n          animationDuration: `${this.props.duration}s`\n        }\n      });\n      this.callbackTimeout = setTimeout(callback, this.props.duration * 1000);\n    }, this.props.delay);\n  }\n\n  animateIn(callback) {\n    this.animate(this.props.animateIn, () => {\n      if (!this.props.animateOnce) {\n        this.setState({\n          style: {\n            animationDuration: `${this.props.duration}s`,\n            opacity: 1\n          }\n        });\n        this.animating = false;\n      }\n      const vis = this.getVisibility();\n      if (callback) {\n        callback(vis);\n      }\n    });\n  }\n\n  animateOut(callback) {\n    this.animate(this.props.animateOut, () => {\n      this.setState({\n        classes: \"animated\",\n        style: {\n          animationDuration: `${this.props.duration}s`,\n          opacity: 0\n        }\n      });\n      const vis = this.getVisibility();\n      if (vis.inViewport && this.props.animateIn) {\n        this.animateIn(this.props.afterAnimatedIn);\n      } else {\n        this.animating = false;\n      }\n\n      if (callback) {\n        callback(vis);\n      }\n    });\n  }\n\n  handleScroll() {\n    if (!this.animating) {\n      const currentVis = this.getVisibility();\n      if (this.visibilityHasChanged(this.visibility, currentVis)) {\n        clearTimeout(this.delayedAnimationTimeout);\n        if (!currentVis.onScreen) {\n          this.setState({\n            classes: \"animated\",\n            style: {\n              animationDuration: `${this.props.duration}s`,\n              opacity: this.props.initiallyVisible ? 1 : 0\n            }\n          });\n        } else if (currentVis.inViewport && this.props.animateIn) {\n          this.animateIn(this.props.afterAnimatedIn);\n        } else if (currentVis.onScreen && this.visibility.inViewport && this.props.animateOut && this.state.style.opacity === 1) {\n          this.animateOut(this.props.afterAnimatedOut);\n        }\n        this.visibility = currentVis;\n      }\n    }\n  }\n\n  render() {\n    var classes = this.props.className ? `${this.props.className} ${this.state.classes}` : this.state.classes;\n    return (\n      <div ref={(node) => { this.node = node; }} className={classes} style={Object.assign({}, this.state.style, this.props.style)}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nAnimationOnScroll.defaultProps = {\n  offset: 150,\n  duration: 1,\n  initiallyVisible: false,\n  delay: 0,\n  animateOnce: false,\n  animatePreScroll: true\n};\n\nAnimationOnScroll.propTypes = {\n  animateIn: PropTypes.string,\n  animateOut: PropTypes.string,\n  offset: PropTypes.number,\n  duration: PropTypes.number,\n  delay: PropTypes.number,\n  initiallyVisible: PropTypes.bool,\n  animateOnce: PropTypes.bool,\n  style: PropTypes.object,\n  scrollableParentSelector: PropTypes.string,\n  className: PropTypes.string,\n  animatePreScroll: PropTypes.bool\n};"]},"metadata":{},"sourceType":"module"}