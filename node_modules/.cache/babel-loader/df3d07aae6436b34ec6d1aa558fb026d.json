{"ast":null,"code":"import _defineProperty from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{withStyles}from\"@material-ui/core\";import clsx from\"clsx\";import{injectIntl}from\"react-intl\";import axios from\"axios\";//import { API_ENDPOINT } from \"../common/Constants\";\nimport{API_ENDPOINT}from\"../../common/Constants\";import PopoverDownloadButton from'./PopoverDownloadButton';//import Filter from \"./Filter\";\nimport styles from\"./styles\";//import data from \"./data.json\";\n//console.log(data);\n//let buketPath = \"https://cuengine-portal.s3.eu-west-2.amazonaws.com/cuverse/2/2/english/\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FolderChooser=/*#__PURE__*/function(_React$Component){_inherits(FolderChooser,_React$Component);var _super=_createSuper(FolderChooser);function FolderChooser(props){var _this;_classCallCheck(this,FolderChooser);_this=_super.call(this,props);_this.toggleSearch=function(toggle){// search.find(\"span\").hide();\n_this.setState({isSearching:toggle});};_this.handleSearch=function(event,value){value=value.trim();_this.setState({searchVal:value});if(value.length===0)_this.toggleSearch(false);};_this.handleKeyUp=function(event){console.log(\"keyup....\");if(event.keyCode===27){// search.trigger(\"focusout\");\n_this.Filter.focusout();}};_this.handleFocusOut=function(event){console.log(\"focus out\");if(!_this.state.searchVal.length)_this.setState({isSearching:false});};_this.handleClickFolders=function(nextDir){return function(event){event.preventDefault();console.log(\"handleClickFolders =\",nextDir);var breadcrumbsUrls=_this.state.breadcrumbsUrls;if(_this.state.isSearching){// Building the breadcrumbs\nbreadcrumbsUrls=_this.generateBreadcrumbs(nextDir);_this.toggleSearch(false);}else{breadcrumbsUrls.push(nextDir);}console.log(\"update breadcrumbsUrls =\",breadcrumbsUrls);_this.setState({currentPath:nextDir,breadcrumbsUrls:breadcrumbsUrls});};};_this.handleSelectFolders=function(nextDir){return function(event){event.preventDefault();_this.setState({selected:nextDir});};};_this.handleBreadcrumbsClick=function(index){return function(event){var breadcrumbsUrls=_this.state.breadcrumbsUrls;var url=breadcrumbsUrls[index];breadcrumbsUrls=_this.generateBreadcrumbs(url);_this.setState({breadcrumbsUrls:breadcrumbsUrls,currentPath:url});};};_this.generateBreadcrumbs=function(nextDir){var path=nextDir.split(\"/\").slice(0);for(var i=1;i<path.length;i++){path[i]=path[i-1]+\"/\"+path[i];}return path;};_this.searchByPath=function(dir){var path=dir.split(\"/\"),demo=[_this.state.data],flag=0;for(var i=0;i<path.length;i++){for(var j=0;j<demo.length;j++){if(demo[j].name===path[i]){flag=1;demo=demo[j].items;break;}}}demo=flag?demo:[];return demo;};_this.searchData=function(data,searchTerms){var folders=[];var files=[];var self=_assertThisInitialized(_this);data.forEach(function(d){if(d.type===\"folder\"){self.searchData(d.items,searchTerms);if(d.name.toLowerCase().match(searchTerms)){folders.push(d);}}else if(d.type===\"file\"){if(d.name.toLowerCase().match(searchTerms)){files.push(d);}}});return{folders:folders,files:files};};_this.escapeHTML=function(text){return text.replace(/\\&/g,\"&amp;\").replace(/\\</g,\"&lt;\").replace(/\\>/g,\"&gt;\");};_this.bytesToSize=function(bytes){var sizes=[\"Bytes\",\"KB\",\"MB\",\"GB\",\"TB\"];if(bytes==0)return\"0 Bytes\";var i=parseInt(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.round(bytes/Math.pow(1024,i),2)+\" \"+sizes[i];};_this.getFilteredData=function(){if(_this.state.isSearching){console.log(\"Search Data \");return _this.searchData([_this.state.data],_this.state.searchVal);}else{return _this.searchByPath(_this.state.currentPath);}};_this.state={folderOnly:false,isSearch:false,isSearching:false,searchVal:\"\",currentPath:'files',breadcrumbsUrls:_this.generateBreadcrumbs('files'),folders:[],files:[],messageIdtt:\"ddddddd\",data:{},projectID:_this.props.projectID,isAuthenticated:_this.props.isAuthenticated};// this.data = data;\nreturn _this;}_createClass(FolderChooser,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var projectID=this.props.projectID;console.log(\"projectID #\",projectID,' @ ',this.state.projectID);axios.get(API_ENDPOINT+'cuverse/mediaFiles/'+projectID).then(function(response){console.log(\"response.data.data\",response.data.data);_this2.setState({data:response.data.data},function(){//console.log(\"apiDataset\", this.state.apiData)\n});}).catch(function(error){console.log(\"error\",error);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){}},{key:\"render\",value:function render(){var _this3=this;if(!this.state.data){return\"Loading...\";}var _this$props=this.props,classes=_this$props.classes,intl=_this$props.intl;var filteredData=this.getFilteredData();var scannedFolders=[];var scannedFiles=[];var test=1000;if(Array.isArray(filteredData)){filteredData.forEach(function(d){if(d.type===\"folder\"){scannedFolders.push(d);}else if(d.type===\"file\"){scannedFiles.push(d);}});}else if(typeof filteredData===\"object\"){scannedFolders=filteredData.folders;scannedFiles=filteredData.files;}var getFileDownload=function getFileDownload(row){console.log(\"row.mime_type \",row.mime_type,row.path);var fileURL=row.path;var fileName=row.name;fetch(fileURL).then(function(resp){return resp.blob();}).then(function(blob){var url=window.URL.createObjectURL(blob);var a=document.createElement('a');a.style.display='none';a.href=url;// the filename you want\na.download=fileName;document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);// alert('your file has downloaded!'); // or you know, something with better UX...\n}).catch(function(){return alert('oh no!');});// var anchor = document.createElement('a');\n// anchor.href = row.path;\n// anchor.target = '_blank';\n// anchor.download = row.name;\n// anchor.click();\n// document.body.removeChild(anchor);\n// function forceDownload(href) {\n// var anchor = document.createElement('a');\n// anchor.href = row.path;\n// anchor.download = row.name;\n// document.body.appendChild(anchor);\n// anchor.click();\n// document.body.removeChild(anchor);\n//}\n};return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(\"div\",{className:clsx(classes.filemanager,this.state.isSearching&&\"searching\"),children:[/*#__PURE__*/_jsx(\"div\",{className:classes.breadcrumbs,children:this.state.isSearching?/*#__PURE__*/_jsx(\"span\",{children:\"Search results: \"}):this.state.breadcrumbsUrls.map(function(u,idx){var name=u.split(\"/\");return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"inline-block\"},children:[idx!==_this3.state.breadcrumbsUrls.length-1&&/*#__PURE__*/_jsx(\"a\",{onClick:_this3.handleBreadcrumbsClick(idx),children:/*#__PURE__*/_jsx(\"span\",{className:\"folderName\",children:name[name.length-1]})}),idx!==_this3.state.breadcrumbsUrls.length-1&&/*#__PURE__*/_jsx(\"span\",{className:\"arrow\",children:\"\\u2192\"}),idx===_this3.state.breadcrumbsUrls.length-1&&/*#__PURE__*/_jsx(\"span\",{className:\"folderName\",children:name[name.length-1]})]},idx);})}),/*#__PURE__*/_jsxs(\"div\",{className:clsx(classes.data,!this.state.isSearching&&\"animated row\"),children:[scannedFolders.map(function(f,idx){var _jsx2;var itemsLength=f.items.length,name=_this3.escapeHTML(f.name);if(itemsLength===0){return/*#__PURE__*/_jsx(_Fragment,{});}return/*#__PURE__*/_jsx(\"div\",(_jsx2={className:\"folders fileFolders col-sm-6\",onClick:_this3.handleSelectFolders(f.path)},_defineProperty(_jsx2,\"onClick\",_this3.handleClickFolders(f.path)),_defineProperty(_jsx2,\"children\",/*#__PURE__*/_jsx(\"a\",{title:f.path,className:\"folders\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-4 position-relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:clsx(classes.icon,classes.folder,itemsLength&&\"full\")}),f.path===_this3.state.selected&&/*#__PURE__*/_jsx(\"span\",{className:clsx(classes.icon,classes.selected)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-7\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fileFolderContent\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:name}),/*#__PURE__*/_jsx(\"div\",{className:\"details\",children:itemsLength+(itemsLength===1?\" item\":itemsLength>1?\" items\":\" Empty\")})]})})]})})),_jsx2),idx);}),scannedFiles.map(function(f,idx){var fileSize=_this3.bytesToSize(f.size);var name=_this3.escapeHTML(f.name);var fileType=name.split(\".\");fileType=fileType[fileType.length-1];return/*#__PURE__*/_jsx(\"div\",{className:clsx(\"files col-sm-6 filesBox\",_this3.state.folderOnly&&\"unselectable\"),children:/*#__PURE__*/_jsx(\"a\",{className:\"files\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 text-center  position-relative\",children:[''].includes(fileType)?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"img\",{src:f.path,width:100,alt:f.name})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"span\",{className:clsx(classes.icon,classes.file,\"f-\"+fileType.toLowerCase()),children:fileType})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-8\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:/*#__PURE__*/_jsx(\"span\",{title:\"click to preview\",href:\"\",children:name})}),/*#__PURE__*/_jsxs(\"span\",{className:\"details\",children:[\" (\",fileSize,\") \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex mt-1 justify-content-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"download\",children:/*#__PURE__*/_jsx(PopoverDownloadButton,{row:f,children:\"Download\"})})})]})]})})},idx);})]}),!scannedFolders.length&&!scannedFiles.length&&/*#__PURE__*/_jsxs(\"div\",{className:classes.nothingfound,children:[/*#__PURE__*/_jsx(\"div\",{className:\"nofiles\"}),/*#__PURE__*/_jsx(\"div\",{className:\"noFilesDiv\",children:\"No files here.\"})]})]})});}}]);return FolderChooser;}(React.Component);export default injectIntl(withStyles(styles)(FolderChooser));","map":{"version":3,"sources":["/var/www/html/cuengine-portal/src/components/cuverse/FolderChooser.js"],"names":["React","withStyles","clsx","injectIntl","axios","API_ENDPOINT","PopoverDownloadButton","styles","FolderChooser","props","toggleSearch","toggle","setState","isSearching","handleSearch","event","value","trim","searchVal","length","handleKeyUp","console","log","keyCode","Filter","focusout","handleFocusOut","state","handleClickFolders","nextDir","preventDefault","breadcrumbsUrls","generateBreadcrumbs","push","currentPath","handleSelectFolders","selected","handleBreadcrumbsClick","index","url","path","split","slice","i","searchByPath","dir","demo","data","flag","j","name","items","searchData","searchTerms","folders","files","self","forEach","d","type","toLowerCase","match","escapeHTML","text","replace","bytesToSize","bytes","sizes","parseInt","Math","floor","round","pow","getFilteredData","folderOnly","isSearch","messageIdtt","projectID","isAuthenticated","get","then","response","catch","error","classes","intl","filteredData","scannedFolders","scannedFiles","test","Array","isArray","getFileDownload","row","mime_type","fileURL","fileName","fetch","resp","blob","window","URL","createObjectURL","a","document","createElement","style","display","href","download","body","appendChild","click","revokeObjectURL","alert","root","filemanager","breadcrumbs","map","u","idx","f","itemsLength","icon","folder","fileSize","size","fileType","includes","file","nothingfound","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withStyles } from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { injectIntl } from \"react-intl\";\nimport axios from \"axios\";\n\n//import { API_ENDPOINT } from \"../common/Constants\";\nimport { API_ENDPOINT } from \"../../common/Constants\";\nimport PopoverDownloadButton from './PopoverDownloadButton';\n//import Filter from \"./Filter\";\nimport styles from \"./styles\";\n//import data from \"./data.json\";\n\n//console.log(data);\n//let buketPath = \"https://cuengine-portal.s3.eu-west-2.amazonaws.com/cuverse/2/2/english/\";\nclass FolderChooser extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            folderOnly: false,\n            isSearch: false,\n            isSearching: false,\n            searchVal: \"\",\n            currentPath: 'files',\n            breadcrumbsUrls: this.generateBreadcrumbs('files'),\n            folders: [],\n            files: [],\n            messageIdtt: \"ddddddd\",\n            data: {},\n            projectID: this.props.projectID,\n            isAuthenticated: this.props.isAuthenticated\n\n        };\n\n        // this.data = data;\n    }\n\n    componentDidMount() {\n        const { projectID } = this.props;\n        console.log(\"projectID #\", projectID, ' @ ', this.state.projectID);\n        axios.get(API_ENDPOINT + 'cuverse/mediaFiles/' + projectID).then((response) => {\n            console.log(\"response.data.data\", response.data.data);\n            this.setState({\n                data: response.data.data\n            }, () => {\n                //console.log(\"apiDataset\", this.state.apiData)\n            })\n\n        }).catch((error) => {\n            console.log(\"error\", error);\n        })\n\n    }\n    componentWillUnmount() { }\n\n    toggleSearch = toggle => {\n        // search.find(\"span\").hide();\n        this.setState({ isSearching: toggle });\n    };\n    handleSearch = (event, value) => {\n        value = value.trim();\n        this.setState({ searchVal: value });\n        if (value.length === 0) this.toggleSearch(false);\n    };\n    handleKeyUp = event => {\n        console.log(\"keyup....\");\n        if (event.keyCode === 27) {\n            // search.trigger(\"focusout\");\n            this.Filter.focusout();\n        }\n    };\n    handleFocusOut = event => {\n        console.log(\"focus out\");\n        if (!this.state.searchVal.length) this.setState({ isSearching: false });\n    };\n    handleClickFolders = nextDir => event => {\n        event.preventDefault();\n        console.log(\"handleClickFolders =\", nextDir);\n\n        var breadcrumbsUrls = this.state.breadcrumbsUrls;\n\n        if (this.state.isSearching) {\n            // Building the breadcrumbs\n            breadcrumbsUrls = this.generateBreadcrumbs(nextDir);\n            this.toggleSearch(false);\n        } else {\n            breadcrumbsUrls.push(nextDir);\n        }\n        console.log(\"update breadcrumbsUrls =\", breadcrumbsUrls);\n        this.setState({ currentPath: nextDir, breadcrumbsUrls: breadcrumbsUrls });\n    };\n\n    handleSelectFolders = nextDir => event => {\n        event.preventDefault();\n        this.setState({ selected: nextDir });\n    };\n    handleBreadcrumbsClick = index => event => {\n        var breadcrumbsUrls = this.state.breadcrumbsUrls;\n        var url = breadcrumbsUrls[index];\n\n        breadcrumbsUrls = this.generateBreadcrumbs(url);\n        this.setState({ breadcrumbsUrls: breadcrumbsUrls, currentPath: url });\n    };\n\n    // Splits a file path and turns it into clickable breadcrumbs\n    generateBreadcrumbs = nextDir => {\n        var path = nextDir.split(\"/\").slice(0);\n        for (var i = 1; i < path.length; i++) {\n            path[i] = path[i - 1] + \"/\" + path[i];\n        }\n        return path;\n    };\n\n    // Locates a file by path\n    searchByPath = dir => {\n        var path = dir.split(\"/\"),\n            demo = [this.state.data],\n            flag = 0;\n\n        for (var i = 0; i < path.length; i++) {\n            for (var j = 0; j < demo.length; j++) {\n                if (demo[j].name === path[i]) {\n                    flag = 1;\n                    demo = demo[j].items;\n                    break;\n                }\n            }\n        }\n\n        demo = flag ? demo : [];\n        return demo;\n    };\n\n    // Recursively search through the file tree\n    searchData = (data, searchTerms) => {\n        var folders = [];\n        var files = [];\n        var self = this;\n        data.forEach(function (d) {\n            if (d.type === \"folder\") {\n                self.searchData(d.items, searchTerms);\n\n                if (d.name.toLowerCase().match(searchTerms)) {\n                    folders.push(d);\n                }\n            } else if (d.type === \"file\") {\n                if (d.name.toLowerCase().match(searchTerms)) {\n                    files.push(d);\n                }\n            }\n        });\n\n        return { folders: folders, files: files };\n    };\n\n    // This function escapes special html characters in names\n    escapeHTML = text => {\n        return text\n            .replace(/\\&/g, \"&amp;\")\n            .replace(/\\</g, \"&lt;\")\n            .replace(/\\>/g, \"&gt;\");\n    };\n\n    // Convert file sizes from bytes to human readable units\n    bytesToSize = bytes => {\n        var sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n        if (bytes == 0) return \"0 Bytes\";\n        var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n        return Math.round(bytes / Math.pow(1024, i), 2) + \" \" + sizes[i];\n    };\n\n    getFilteredData = () => {\n        if (this.state.isSearching) {\n            console.log(\"Search Data \");\n            return this.searchData([this.state.data], this.state.searchVal);\n        } else {\n            return this.searchByPath(this.state.currentPath);\n        }\n    };\n\n\n\n    render() {\n        if (!this.state.data) {\n            return \"Loading...\";\n        }\n        const { classes, intl } = this.props;\n\n        var filteredData = this.getFilteredData();\n        var scannedFolders = [];\n        var scannedFiles = [];\n        const test = 1000;\n\n        if (Array.isArray(filteredData)) {\n            filteredData.forEach(function (d) {\n                if (d.type === \"folder\") {\n                    scannedFolders.push(d);\n                } else if (d.type === \"file\") {\n                    scannedFiles.push(d);\n                }\n            });\n        } else if (typeof filteredData === \"object\") {\n            scannedFolders = filteredData.folders;\n            scannedFiles = filteredData.files;\n        }\n\n        const getFileDownload = (row) => {\n            console.log(\"row.mime_type \", row.mime_type, row.path);\n            let fileURL = row.path;\n            let fileName = row.name;\n\n            fetch(fileURL)\n                .then(resp => resp.blob())\n                .then(blob => {\n                    const url = window.URL.createObjectURL(blob);\n                    const a = document.createElement('a');\n                    a.style.display = 'none';\n                    a.href = url;\n                    // the filename you want\n                    a.download = fileName;\n                    document.body.appendChild(a);\n                    a.click();\n                    window.URL.revokeObjectURL(url);\n                    // alert('your file has downloaded!'); // or you know, something with better UX...\n                })\n                .catch(() => alert('oh no!'));\n\n            // var anchor = document.createElement('a');\n            // anchor.href = row.path;\n            // anchor.target = '_blank';\n            // anchor.download = row.name;\n            // anchor.click();\n            // document.body.removeChild(anchor);\n\n            // function forceDownload(href) {\n            // var anchor = document.createElement('a');\n            // anchor.href = row.path;\n            // anchor.download = row.name;\n            // document.body.appendChild(anchor);\n            // anchor.click();\n            // document.body.removeChild(anchor);\n            //}\n\n\n        };\n\n\n        return (\n            <div className={classes.root}>\n                <div\n                    className={clsx(\n                        classes.filemanager,\n                        this.state.isSearching && \"searching\"\n                    )}\n                >\n                    {/* <div\n                        className={classes.search}\n                        onClick={() => {\n                            this.toggleSearch(true);\n                        }}\n                    >\n                        {this.state.isSearching && (\n                            <Filter\n                                updateFilter={this.handleSearch}\n                                onKeyUp={this.handleKeyUp}\n                                onFocusOut={this.handleFocusOut}\n                                value={this.state.searchVal}\n                                placeholder={intl.formatMessage(\n                                    {\n                                        id: \"messageIdtt\",\n                                        defaultMessage: `Hello {name}, you have {unreadCount, number} {unreadCount, plural, one {message}  other {messages} }`\n                                    },\n                                    { name: <b>{\"fvd\"}</b>, test }\n                                )}\n                                ref={input => {\n                                    this.Filter = input;\n                                }}\n                            />\n                        )}\n                    </div> */}\n\n                    <div className={classes.breadcrumbs}>\n                        {this.state.isSearching ? (\n                            <span>Search results: </span>\n                        ) : (\n                            this.state.breadcrumbsUrls.map((u, idx) => {\n                                var name = u.split(\"/\");\n                                return (\n                                    <div style={{ display: \"inline-block\" }} key={idx}>\n                                        {idx !== this.state.breadcrumbsUrls.length - 1 && (\n                                            <a onClick={this.handleBreadcrumbsClick(idx)}>\n                                                <span className=\"folderName\">\n                                                    {name[name.length - 1]}\n                                                </span>\n                                            </a>\n                                        )}\n                                        {idx !== this.state.breadcrumbsUrls.length - 1 && (\n                                            <span className=\"arrow\">→</span>\n                                        )}\n                                        {idx === this.state.breadcrumbsUrls.length - 1 && (\n                                            <span className=\"folderName\">\n                                                {name[name.length - 1]}\n                                            </span>\n                                        )}\n                                    </div>\n                                );\n                            })\n                        )}\n                    </div>\n\n                    <div\n                        className={clsx(\n                            classes.data,\n                            !this.state.isSearching && \"animated row\"\n                        )}\n                    >\n                        {scannedFolders.map((f, idx) => {\n                            var itemsLength = f.items.length,\n                                name = this.escapeHTML(f.name);\n                            if(itemsLength===0){\n                                return (<></>);\n                            }\n                            return (\n                                <div\n                                    className=\"folders fileFolders col-sm-6\"\n                                    onClick={this.handleSelectFolders(f.path)}\n                                    onClick={this.handleClickFolders(f.path)}\n                                    key={idx}\n                                >\n                                    <a title={f.path} className=\"folders\">\n                                        <div className=\"row align-items-center \">\n                                            <div className=\"col-4 position-relative\">\n                                                <span\n                                                    className={clsx(\n                                                        classes.icon,\n                                                        classes.folder,\n                                                        itemsLength && \"full\"\n                                                    )}\n                                                />\n                                                {f.path === this.state.selected && (\n                                                    <span className={clsx(classes.icon, classes.selected)} />\n                                                )}\n                                            </div>\n                                            <div className=\"col-7\">\n                                                <div className=\"fileFolderContent\">\n                                                    <div className=\"name\">{name}</div>\n                                                    <div className=\"details\">\n                                                        {itemsLength +\n                                                            (itemsLength === 1\n                                                                ? \" item\"\n                                                                : itemsLength > 1\n                                                                    ? \" items\"\n                                                                    : \" Empty\")}\n                                                    </div>\n                                                </div>\n\n                                            </div>\n                                        </div>\n                                    </a>\n                                </div>\n                            );\n                        })}\n                        {scannedFiles.map((f, idx) => {\n                            var fileSize = this.bytesToSize(f.size);\n                            var name = this.escapeHTML(f.name);\n                            var fileType = name.split(\".\");\n                            fileType = fileType[fileType.length - 1];\n\n                            return (\n                                <div\n                                    className={clsx(\n                                        \"files col-sm-6 filesBox\",\n                                        this.state.folderOnly && \"unselectable\"\n                                    )}\n                                    key={idx}\n                                >\n                                    <a className=\"files\">\n                                        <div className=\"row align-items-center\">\n                                            <div className=\"col-4 text-center  position-relative\">\n                                                {[''].includes(fileType) ?\n                                                <>\n                                                <img src={f.path} width={100} alt={f.name} />\n                                                </>\n                                                :\n                                                <>\n                                                <span\n                                                    className={clsx(\n                                                        classes.icon,\n                                                        classes.file,\n                                                        \"f-\" + fileType.toLowerCase()\n                                                    )}\n                                                >\n                                                    {fileType}\n                                                </span>\n                                                </>\n                                                }\n                                                \n                                            </div>\n                                            <div className=\"col-8\">\n                                                <span className=\"name\"><span title=\"click to preview\" href=\"\">{name}</span></span>\n                                                <span className=\"details\"> ({fileSize}) </span>\n                                                <div className=\"d-flex mt-1 justify-content-between\">\n                                                    <div className=\"download\">\n                                                        <PopoverDownloadButton row={f}>\n                                                            Download\n                                                        </PopoverDownloadButton>\n                                                     {/* <button className=\"btn btn-sm btn-primary align-items-center mb-3\" onClick={() => getFileDownload(f)}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-download\" viewBox=\"0 0 16 16\">\n                                                         <path d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\" />\n                                                         <path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\" />\n                                                     </svg> Download</button> */}\n                                                    </div>\n                                                    {/* <div className=\"previewEye\">\n                                                    <a title=\"click to preview\" target=\"_blank\" href={buketPath + name}><img src=\"../assets/images/eye.svg\"></img></a>\n                                                    </div> */}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </a>\n                                </div>\n                            );\n                        })}\n                    </div>\n\n                    {\n                        !scannedFolders.length && !scannedFiles.length && (\n                            <div className={classes.nothingfound}>\n                                <div className=\"nofiles\" />\n                                <div className=\"noFilesDiv\">No files here.</div>\n                            </div>\n                        )\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nFolderChooser.propTypes = {\n    classes: PropTypes.object.isRequired,\n    intl: PropTypes.object.isRequired,\n    projectID: PropTypes.number.isRequired,\n    isAuthenticated: PropTypes.bool.isRequired,\n\n};\n\nexport default injectIntl(withStyles(styles)(FolderChooser));\n"]},"metadata":{},"sourceType":"module"}