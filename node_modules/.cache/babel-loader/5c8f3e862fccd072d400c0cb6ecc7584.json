{"ast":null,"code":"var _jsxFileName = \"/var/www/html/cuengine-portal/src/pages/ThreeDSystemPage.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useAuthHeader, useIsAuthenticated } from 'react-auth-kit';\nimport axios from \"axios\";\nimport UnauthenticatedPage from \"../errors/Unauthorized\";\nimport { API_ENDPOINT } from '../common/Constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ThreeDSystemPage() {\n  _s();\n\n  let {\n    id,\n    sdk\n  } = useParams();\n  const authHeader = useAuthHeader();\n  const isAuthenticated = useIsAuthenticated();\n  const [projectStreamLoading, setProjectStreamLoading] = useState(false);\n  const [projectStream, setProjectStream] = useState(null);\n  useEffect(() => {\n    fetchProjectStream();\n  }, []);\n\n  if (!isAuthenticated()) {\n    // Redirect to login\n    console.log(\"valid Redirect to login\");\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(UnauthenticatedPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n  async function fetchProjectStream() {\n    setProjectStreamLoading(true);\n    let postData = {\n      test: null,\n      project_id: id\n    };\n\n    try {\n      const res = await axios.post(API_ENDPOINT + \"vagon/getStream\", postData, {\n        headers: {\n          Authorization: authHeader()\n        }\n      });\n\n      if (res.data.data) {\n        setProjectStreamLoading(false);\n        setProjectStream(res.data.data);\n      }\n    } catch (error) {\n      console.error(\"error \", error);\n      setProjectStreamLoading(false);\n\n      if (error.response.status === 422) {\n        console.log(\"errors data \", error.response.data.errors);\n        let errors = error.response.data.errors;\n\n        if (errors.client_code === 4601) {\n          alert(\"Insufficient Capacity. Please try again later.\");\n        } // console.log(\"error \\n\", error.response.data.message)\n        // setFormValidationErrors(error.response.data.errors);\n        // setFormErrors(error.response.data.message);\n        // setTimeout(() => {\n        //     setFormValidationErrors({});\n        //     setFormErrors('');\n        // }, 5000);\n\n      }\n    }\n  } // 896.992\n  //const userId = auth().user.id;\n\n\n  const token = authHeader();\n  const simpleToken = token.replace('Bearer ', '-token%20');\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: projectStreamLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: projectStream ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: projectStream.project.is_3d_enabled ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n            title: \"3Dstream\",\n            src: `${projectStream.stream.attributes.connection_link}?launchFlags=${simpleToken}`,\n            width: \"100%\",\n            height: \"100%\",\n            style: {\n              border: 0,\n              margin: 0,\n              height: 'calc(100vh - 8px)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 19\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: \"3d system is not available.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 19\n          }, this)\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: \"No data available.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this)\n      }, void 0, false)\n    }, void 0, false)\n  }, void 0, false);\n}\n\n_s(ThreeDSystemPage, \"nJxd+tF9C94iGoJgmN7O5xdcqdQ=\", false, function () {\n  return [useParams, useAuthHeader, useIsAuthenticated];\n});\n\n_c = ThreeDSystemPage;\nexport default ThreeDSystemPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ThreeDSystemPage\");","map":{"version":3,"sources":["/var/www/html/cuengine-portal/src/pages/ThreeDSystemPage.js"],"names":["useEffect","useState","useParams","useAuthHeader","useIsAuthenticated","axios","UnauthenticatedPage","API_ENDPOINT","ThreeDSystemPage","id","sdk","authHeader","isAuthenticated","projectStreamLoading","setProjectStreamLoading","projectStream","setProjectStream","fetchProjectStream","console","log","postData","test","project_id","res","post","headers","Authorization","data","error","response","status","errors","client_code","alert","token","simpleToken","replace","project","is_3d_enabled","stream","attributes","connection_link","border","margin","height"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useAuthHeader, useIsAuthenticated } from 'react-auth-kit';\n\nimport axios from \"axios\";\nimport UnauthenticatedPage from \"../errors/Unauthorized\";\nimport { API_ENDPOINT } from '../common/Constants';\n\nfunction ThreeDSystemPage() {\n  let { id, sdk } = useParams();\n  const authHeader = useAuthHeader();\n  const isAuthenticated = useIsAuthenticated();\n\n  const [projectStreamLoading, setProjectStreamLoading] = useState(false);\n  const [projectStream, setProjectStream] = useState(null);\n\n  useEffect(() => {\n    fetchProjectStream();\n  }, []);\n\n\n  if (!isAuthenticated()) {\n    // Redirect to login\n    console.log(\"valid Redirect to login\");\n    return (\n      <>\n        <UnauthenticatedPage />\n        {/* <Navigate to=\"/401\" replace /> */}\n      </>\n    );\n  }\n\n\n  async function fetchProjectStream() {\n    setProjectStreamLoading(true);\n    let postData = {\n      test: null,\n      project_id: id\n    };\n    try {\n\n      const res = await axios.post(API_ENDPOINT + \"vagon/getStream\", postData, { headers: { Authorization: authHeader() } });\n      if (res.data.data) {\n        setProjectStreamLoading(false);\n        setProjectStream(res.data.data);\n      }\n    } catch (error) {\n      console.error(\"error \", error);\n      setProjectStreamLoading(false);\n\n      if (error.response.status === 422) {\n        console.log(\"errors data \", error.response.data.errors);\n        let errors = error.response.data.errors;\n        if(errors.client_code===4601){\n          alert(\"Insufficient Capacity. Please try again later.\");\n        }\n       // console.log(\"error \\n\", error.response.data.message)\n        // setFormValidationErrors(error.response.data.errors);\n        // setFormErrors(error.response.data.message);\n        // setTimeout(() => {\n        //     setFormValidationErrors({});\n        //     setFormErrors('');\n        // }, 5000);\n    }\n\n    }\n  }\n\n\n\n  // 896.992\n  //const userId = auth().user.id;\n  const token = authHeader();\n  const simpleToken = token.replace('Bearer ', '-token%20');\n\n  return (\n    <>\n\n      {projectStreamLoading ?\n        <>\n          <div className=\"text-center\">Loading...</div>\n        </>\n        :\n        <>\n          {projectStream ?\n            <div>\n              {projectStream.project.is_3d_enabled ?\n                <><iframe title=\"3Dstream\" src={`${projectStream.stream.attributes.connection_link}?launchFlags=${simpleToken}`} width=\"100%\" height=\"100%\" style={{ border: 0, margin:0, height: 'calc(100vh - 8px)' }}></iframe></>\n                :\n                <><div className=\"text-center\">3d system is not available.</div></>\n              }\n            </div>\n            :\n            <><div className=\"text-center\">No data available.</div></>\n          }\n        </>\n      }\n\n      {/* <iframe title=\"3Dstream\" src={`https://furioos.cubedots.com/?playerId=${sdk}&token=${simpleToken}`} width=\"100%\" height=\"100%\" frameBorder=\"0\" style={{ border: 0 , height:'calc(100vh - 50px)'}} loading=\"lazy\" allowFullScreen=\"\" aria-hidden=\"false\" tabIndex=\"0\"></iframe> */}\n    </>\n  );\n}\n\nexport default ThreeDSystemPage;"]},"metadata":{},"sourceType":"module"}