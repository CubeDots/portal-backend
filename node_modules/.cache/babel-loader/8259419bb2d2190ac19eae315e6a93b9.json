{"ast":null,"code":"var _jsxFileName = \"/var/www/html/cuengine-portal/src/components/cuverse/PopoverDownloadButton.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport Popover from 'react-bootstrap/Popover';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport { useIsAuthenticated } from 'react-auth-kit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UpdatingPopover = /*#__PURE__*/React.forwardRef(_c = _s((_ref, ref) => {\n  _s();\n\n  let {\n    popper,\n    children,\n    show: _,\n    ...props\n  } = _ref;\n  useEffect(() => {\n    console.log('updating!');\n    popper.scheduleUpdate();\n  }, [children, popper]);\n  return /*#__PURE__*/_jsxDEV(Popover, {\n    ref: ref,\n    body: true,\n    ...props,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 7\n  }, this);\n}, \"OD7bBpZva5O2jO+Puf00hKivP7c=\"));\n_c2 = UpdatingPopover;\n\nfunction PopoverDownloadButton(props) {\n  _s2();\n\n  const {\n    row\n  } = props;\n  const isAuthenticated = useIsAuthenticated();\n\n  const getFileDownload = row => {\n    console.log(\"row.mime_type \", row.mime_type, row.path);\n    let fileURL = row.path;\n    let fileName = row.name;\n    fetch(fileURL).then(resp => resp.blob()).then(blob => {\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url; // the filename you want\n\n      a.download = fileName;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url); // alert('your file has downloaded!'); // or you know, something with better UX...\n    }).catch(() => alert('oh no!')); // var anchor = document.createElement('a');\n    // anchor.href = row.path;\n    // anchor.target = '_blank';\n    // anchor.download = row.name;\n    // anchor.click();\n    // document.body.removeChild(anchor);\n    // function forceDownload(href) {\n    // var anchor = document.createElement('a');\n    // anchor.href = row.path;\n    // anchor.download = row.name;\n    // document.body.appendChild(anchor);\n    // anchor.click();\n    // document.body.removeChild(anchor);\n    //}\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isAuthenticated() ? /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"btn btn-sm btn-primary align-items-center mb-3\",\n      onClick: () => getFileDownload(row),\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"16\",\n        height: \"16\",\n        fill: \"currentColor\",\n        className: \"bi bi-download\",\n        viewBox: \"0 0 16 16\",\n        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), \" \", props.children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n      trigger: \"click\",\n      overlay: /*#__PURE__*/_jsxDEV(UpdatingPopover, {\n        id: \"popover-contained\",\n        children: \"Login required.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 20\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-sm btn-primary align-items-center mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          fill: \"currentColor\",\n          className: \"bi bi-download\",\n          viewBox: \"0 0 16 16\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), \" \", props.children]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s2(PopoverDownloadButton, \"Kid1KK9s42lG8S9oCmMHzg7A/aM=\", false, function () {\n  return [useIsAuthenticated];\n});\n\n_c3 = PopoverDownloadButton;\nexport default PopoverDownloadButton;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"UpdatingPopover$React.forwardRef\");\n$RefreshReg$(_c2, \"UpdatingPopover\");\n$RefreshReg$(_c3, \"PopoverDownloadButton\");","map":{"version":3,"sources":["/var/www/html/cuengine-portal/src/components/cuverse/PopoverDownloadButton.js"],"names":["React","useEffect","Popover","OverlayTrigger","useIsAuthenticated","UpdatingPopover","forwardRef","ref","popper","children","show","_","props","console","log","scheduleUpdate","PopoverDownloadButton","row","isAuthenticated","getFileDownload","mime_type","path","fileURL","fileName","name","fetch","then","resp","blob","url","window","URL","createObjectURL","a","document","createElement","style","display","href","download","body","appendChild","click","revokeObjectURL","catch","alert"],"mappings":"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","sourcesContent":["\nimport React, { useEffect } from 'react';\nimport Popover from 'react-bootstrap/Popover';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport { useIsAuthenticated } from 'react-auth-kit';\n\nconst UpdatingPopover = React.forwardRef(\n  ({ popper, children, show: _, ...props }, ref) => {\n    useEffect(() => {\n      console.log('updating!');\n      popper.scheduleUpdate();\n    }, [children, popper]);\n\n    return (\n      <Popover ref={ref} body {...props}>\n        {children}\n      </Popover>\n    );\n  },\n);\n\n\nfunction PopoverDownloadButton(props) {\n  const { row } = props;\n  const isAuthenticated = useIsAuthenticated();\n\n  const getFileDownload = (row) => {\n    console.log(\"row.mime_type \", row.mime_type, row.path);\n    let fileURL = row.path;\n    let fileName = row.name;\n\n    fetch(fileURL)\n      .then(resp => resp.blob())\n      .then(blob => {\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.style.display = 'none';\n        a.href = url;\n        // the filename you want\n        a.download = fileName;\n        document.body.appendChild(a);\n        a.click();\n        window.URL.revokeObjectURL(url);\n        // alert('your file has downloaded!'); // or you know, something with better UX...\n      })\n      .catch(() => alert('oh no!'));\n\n    // var anchor = document.createElement('a');\n    // anchor.href = row.path;\n    // anchor.target = '_blank';\n    // anchor.download = row.name;\n    // anchor.click();\n    // document.body.removeChild(anchor);\n\n    // function forceDownload(href) {\n    // var anchor = document.createElement('a');\n    // anchor.href = row.path;\n    // anchor.download = row.name;\n    // document.body.appendChild(anchor);\n    // anchor.click();\n    // document.body.removeChild(anchor);\n    //}\n\n\n  };\n\n  return (\n    <>\n      {isAuthenticated() ?\n        <button type=\"button\" className=\"btn btn-sm btn-primary align-items-center mb-3\" onClick={() => getFileDownload(row)} >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-download\" viewBox=\"0 0 16 16\">\n            <path d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\" />\n            <path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\" />\n          </svg> {props.children}\n        </button>\n        :\n        <OverlayTrigger\n          trigger=\"click\"\n          overlay={<UpdatingPopover id=\"popover-contained\">Login required.</UpdatingPopover>}\n        >\n          <button type=\"button\" className=\"btn btn-sm btn-primary align-items-center mb-3\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-download\" viewBox=\"0 0 16 16\">\n              <path d=\"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z\" />\n              <path d=\"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z\" />\n            </svg> {props.children}\n          </button>\n        </OverlayTrigger>\n      }\n    </>\n  );\n}\n\nexport default PopoverDownloadButton;"]},"metadata":{},"sourceType":"module"}