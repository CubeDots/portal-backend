{"ast":null,"code":"var _jsxFileName = \"/var/www/html/cuengine-portal-backend/src/pages/ThreeDSystemPage.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useAuthHeader, useIsAuthenticated } from 'react-auth-kit';\nimport Platform from 'react-platform-js';\nimport axios from \"axios\";\nimport UnauthenticatedPage from \"../errors/Unauthorized\";\nimport { API_ENDPOINT } from '../common/Constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ThreeDSystemPage() {\n  _s();\n\n  let {\n    id,\n    sdk\n  } = useParams();\n  const authHeader = useAuthHeader();\n  const isAuthenticated = useIsAuthenticated();\n  let navigate = useNavigate();\n  const [projectStreamLoading, setProjectStreamLoading] = useState(false);\n  const [projectStream, setProjectStream] = useState(null);\n  useEffect(() => {\n    fetchProjectStream();\n    console.log(\"Platform \", Platform);\n  }, []);\n\n  if (!isAuthenticated()) {\n    // Redirect to login\n    console.log(\"valid Redirect to login\");\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(UnauthenticatedPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n  async function fetchProjectStream() {\n    setProjectStreamLoading(true);\n    let postData = {\n      test: null,\n      project_id: id\n    };\n\n    try {\n      const res = await axios.post(API_ENDPOINT + \"vagon/getStream\", postData, {\n        headers: {\n          Authorization: authHeader()\n        }\n      });\n\n      if (res.data.data) {\n        setProjectStreamLoading(false);\n        setProjectStream(res.data.data);\n      }\n    } catch (error) {\n      console.error(\"error \", error);\n      setProjectStreamLoading(false);\n\n      if (error.response.status === 422) {\n        console.log(\"errors data \", error.response.data.errors);\n        let errors = error.response.data.errors;\n\n        if (errors.client_code === 4601) {\n          alert(\"Insufficient Capacity. Please try again later.\");\n        } // console.log(\"error \\n\", error.response.data.message)\n        // setFormValidationErrors(error.response.data.errors);\n        // setFormErrors(error.response.data.message);\n        // setTimeout(() => {\n        //     setFormValidationErrors({});\n        //     setFormErrors('');\n        // }, 5000);\n\n      }\n    }\n  }\n\n  const mobileCheck = () => {\n    let check = false;\n\n    (function (a) {\n      if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipad|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n    })(navigator.userAgent || navigator.vendor || window.opera);\n\n    return check;\n  }; // 896.992\n  //const userId = auth().user.id;\n\n\n  const token = authHeader();\n  const simpleToken = token.replace('Bearer ', '-token%20');\n  let devicePlatform = '';\n  if (Platform.OS === 'Android' && Platform.DeviceType === 'mobile') devicePlatform = 'Android';else if (Platform.OS === 'iOS' && Platform.DeviceType === 'mobile') devicePlatform = 'iPhone';else if (Platform.OS === 'iOS' && Platform.DeviceType === 'tablet') devicePlatform = 'iPad';else devicePlatform = 'Desktop';\n\n  function openFullscreen() {\n    var elem = document.getElementsByTagName(\"iframe\")[0]; //document.getElementById(\"twoDSales\");\n\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.webkitRequestFullscreen) {\n      /* Safari */\n      elem.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n    } else if (elem.msRequestFullscreen) {\n      /* IE11 */\n      elem.msRequestFullscreen();\n    } else if (elem.mozRequestFullScreen) {\n      /* moz */\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitEnterFullScreen) {\n      elem.webkitEnterFullScreen();\n    } else {\n      //elem.webkitEnterFullscreen();\n      alert('The requested browser does not support full-screen mode.');\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: projectStreamLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: projectStream ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: projectStream.project.is_3d_enabled ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-auto twoDbackBtn\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              title: \"Back\",\n              className: \"cusocialBackBtn\",\n              onClick: () => navigate(-1),\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"16\",\n                height: \"16\",\n                fill: \"currentColor\",\n                className: \"bi bi-arrow-left\",\n                viewBox: \"0 0 16 16\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  fillRule: \"evenodd\",\n                  d: \"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 21\n            }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n              title: \"FullScreen\",\n              className: \"cusocialBackBtn\",\n              onClick: () => openFullscreen(),\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"16\",\n                height: \"16\",\n                fill: \"currentColor\",\n                className: \"bi bi-fullscreen\",\n                viewBox: \"0 0 16 16\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n            title: \"3Dstream\",\n            src: `${projectStream.stream.vagon_stream_url}?launchFlags=${simpleToken}%20-platform%20${devicePlatform}`,\n            width: \"100%\",\n            height: \"100%\",\n            style: {\n              border: 0,\n              margin: 0,\n              height: 'calc(100vh - 8px)'\n            },\n            allowFullScreen: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: \"3d system is not available.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 19\n          }, this)\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: \"No data available.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 15\n        }, this)\n      }, void 0, false)\n    }, void 0, false)\n  }, void 0, false);\n}\n\n_s(ThreeDSystemPage, \"g4yruIdb62IyGNSurAicIpgKfnw=\", false, function () {\n  return [useParams, useAuthHeader, useIsAuthenticated, useNavigate];\n});\n\n_c = ThreeDSystemPage;\nexport default ThreeDSystemPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ThreeDSystemPage\");","map":{"version":3,"sources":["/var/www/html/cuengine-portal-backend/src/pages/ThreeDSystemPage.js"],"names":["useEffect","useState","useParams","useNavigate","useAuthHeader","useIsAuthenticated","Platform","axios","UnauthenticatedPage","API_ENDPOINT","ThreeDSystemPage","id","sdk","authHeader","isAuthenticated","navigate","projectStreamLoading","setProjectStreamLoading","projectStream","setProjectStream","fetchProjectStream","console","log","postData","test","project_id","res","post","headers","Authorization","data","error","response","status","errors","client_code","alert","mobileCheck","check","a","substr","navigator","userAgent","vendor","window","opera","token","simpleToken","replace","devicePlatform","OS","DeviceType","openFullscreen","elem","document","getElementsByTagName","requestFullscreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msRequestFullscreen","mozRequestFullScreen","webkitEnterFullScreen","project","is_3d_enabled","stream","vagon_stream_url","border","margin","height"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,kBAAvC;AACA,SAASC,aAAT,EAAwBC,kBAAxB,QAAkD,gBAAlD;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,mBAAP,MAAgC,wBAAhC;AACA,SAASC,YAAT,QAA6B,qBAA7B;;;;AAEA,SAASC,gBAAT,GAA4B;AAAA;;AAC1B,MAAI;AAAEC,IAAAA,EAAF;AAAMC,IAAAA;AAAN,MAAcV,SAAS,EAA3B;AACA,QAAMW,UAAU,GAAGT,aAAa,EAAhC;AACA,QAAMU,eAAe,GAAGT,kBAAkB,EAA1C;AACA,MAAIU,QAAQ,GAAGZ,WAAW,EAA1B;AACA,QAAM,CAACa,oBAAD,EAAuBC,uBAAvB,IAAkDhB,QAAQ,CAAC,KAAD,CAAhE;AACA,QAAM,CAACiB,aAAD,EAAgBC,gBAAhB,IAAoClB,QAAQ,CAAC,IAAD,CAAlD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,kBAAkB;AAClBC,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBhB,QAAzB;AACD,GAHQ,EAGN,EAHM,CAAT;;AAMA,MAAI,CAACQ,eAAe,EAApB,EAAwB;AACtB;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACA,wBACE;AAAA,6BACE,QAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AADF,qBADF;AAMD;;AAGD,iBAAeF,kBAAf,GAAoC;AAClCH,IAAAA,uBAAuB,CAAC,IAAD,CAAvB;AACA,QAAIM,QAAQ,GAAG;AACbC,MAAAA,IAAI,EAAE,IADO;AAEbC,MAAAA,UAAU,EAAEd;AAFC,KAAf;;AAIA,QAAI;AAEF,YAAMe,GAAG,GAAG,MAAMnB,KAAK,CAACoB,IAAN,CAAWlB,YAAY,GAAG,iBAA1B,EAA6Cc,QAA7C,EAAuD;AAAEK,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAEhB,UAAU;AAA3B;AAAX,OAAvD,CAAlB;;AACA,UAAIa,GAAG,CAACI,IAAJ,CAASA,IAAb,EAAmB;AACjBb,QAAAA,uBAAuB,CAAC,KAAD,CAAvB;AACAE,QAAAA,gBAAgB,CAACO,GAAG,CAACI,IAAJ,CAASA,IAAV,CAAhB;AACD;AACF,KAPD,CAOE,OAAOC,KAAP,EAAc;AACdV,MAAAA,OAAO,CAACU,KAAR,CAAc,QAAd,EAAwBA,KAAxB;AACAd,MAAAA,uBAAuB,CAAC,KAAD,CAAvB;;AAEA,UAAIc,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAA9B,EAAmC;AACjCZ,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BS,KAAK,CAACC,QAAN,CAAeF,IAAf,CAAoBI,MAAhD;AACA,YAAIA,MAAM,GAAGH,KAAK,CAACC,QAAN,CAAeF,IAAf,CAAoBI,MAAjC;;AACA,YAAIA,MAAM,CAACC,WAAP,KAAuB,IAA3B,EAAiC;AAC/BC,UAAAA,KAAK,CAAC,gDAAD,CAAL;AACD,SALgC,CAMjC;AACA;AACA;AACA;AACA;AACA;AACA;;AACD;AAEF;AACF;;AAGD,QAAMC,WAAW,GAAG,MAAM;AACxB,QAAIC,KAAK,GAAG,KAAZ;;AACA,KAAC,UAAUC,CAAV,EAAa;AAAE,UAAI,2TAA2Tf,IAA3T,CAAgUe,CAAhU,KAAsU,+kDAA+kDf,IAA/kD,CAAolDe,CAAC,CAACC,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAplD,CAA1U,EAA+6DF,KAAK,GAAG,IAAR;AAAe,KAA98D,EAAg9DG,SAAS,CAACC,SAAV,IAAuBD,SAAS,CAACE,MAAjC,IAA2CC,MAAM,CAACC,KAAlgE;;AACA,WAAOP,KAAP;AACD,GAJD,CA9D0B,CAsE1B;AACA;;;AACA,QAAMQ,KAAK,GAAGjC,UAAU,EAAxB;AACA,QAAMkC,WAAW,GAAGD,KAAK,CAACE,OAAN,CAAc,SAAd,EAAyB,WAAzB,CAApB;AAEA,MAAIC,cAAc,GAAG,EAArB;AACA,MAAI3C,QAAQ,CAAC4C,EAAT,KAAgB,SAAhB,IAA6B5C,QAAQ,CAAC6C,UAAT,KAAwB,QAAzD,EACEF,cAAc,GAAG,SAAjB,CADF,KAEK,IAAI3C,QAAQ,CAAC4C,EAAT,KAAgB,KAAhB,IAAyB5C,QAAQ,CAAC6C,UAAT,KAAwB,QAArD,EACHF,cAAc,GAAG,QAAjB,CADG,KAEA,IAAI3C,QAAQ,CAAC4C,EAAT,KAAgB,KAAhB,IAAyB5C,QAAQ,CAAC6C,UAAT,KAAwB,QAArD,EACHF,cAAc,GAAG,MAAjB,CADG,KAGHA,cAAc,GAAG,SAAjB;;AAEA,WAASG,cAAT,GAA0B;AACxB,QAAIC,IAAI,GAAGC,QAAQ,CAACC,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CAAX,CADwB,CAC8B;;AAEtD,QAAIF,IAAI,CAACG,iBAAT,EAA4B;AAC1BH,MAAAA,IAAI,CAACG,iBAAL;AACD,KAFD,MAEO,IAAIH,IAAI,CAACI,uBAAT,EAAkC;AAAE;AACzCJ,MAAAA,IAAI,CAACI,uBAAL,CAA6BC,OAAO,CAACC,oBAArC;AACD,KAFM,MAEA,IAAIN,IAAI,CAACO,mBAAT,EAA8B;AAAE;AACrCP,MAAAA,IAAI,CAACO,mBAAL;AACD,KAFM,MAEA,IAAIP,IAAI,CAACQ,oBAAT,EAA+B;AAAE;AACtCR,MAAAA,IAAI,CAACQ,oBAAL;AACD,KAFM,MAEA,IAAIR,IAAI,CAACS,qBAAT,EAAgC;AACrCT,MAAAA,IAAI,CAACS,qBAAL;AACD,KAFM,MAEA;AACL;AACA1B,MAAAA,KAAK,CAAC,0DAAD,CAAL;AACD;AACF;;AACH,sBACE;AAAA,cAEGpB,oBAAoB,gBACnB;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,qBADmB,gBAKnB;AAAA,gBACGE,aAAa,gBACZ;AAAA,kBACGA,aAAa,CAAC6C,OAAd,CAAsBC,aAAtB,gBACC;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,sBAAf;AAAA,oCACE;AAAQ,cAAA,KAAK,EAAC,MAAd;AAAqB,cAAA,SAAS,EAAC,iBAA/B;AAAiD,cAAA,OAAO,EAAE,MAAMjD,QAAQ,CAAC,CAAC,CAAF,CAAxE;AAAA,qCACE;AAAK,gBAAA,KAAK,EAAC,4BAAX;AAAwC,gBAAA,KAAK,EAAC,IAA9C;AAAmD,gBAAA,MAAM,EAAC,IAA1D;AAA+D,gBAAA,IAAI,EAAC,cAApE;AAAmF,gBAAA,SAAS,EAAC,kBAA7F;AAAgH,gBAAA,OAAO,EAAC,WAAxH;AAAA,uCACE;AAAM,kBAAA,QAAQ,EAAC,SAAf;AAAyB,kBAAA,CAAC,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,uBAOE;AAAQ,cAAA,KAAK,EAAC,YAAd;AAA2B,cAAA,SAAS,EAAC,iBAArC;AAAuD,cAAA,OAAO,EAAE,MAAMqC,cAAc,EAApF;AAAA,qCACE;AAAK,gBAAA,KAAK,EAAC,4BAAX;AAAwC,gBAAA,KAAK,EAAC,IAA9C;AAAmD,gBAAA,MAAM,EAAC,IAA1D;AAA+D,gBAAA,IAAI,EAAC,cAApE;AAAmF,gBAAA,SAAS,EAAC,kBAA7F;AAAgH,gBAAA,OAAO,EAAC,WAAxH;AAAA,uCACE;AAAM,kBAAA,CAAC,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAcE;AAAQ,YAAA,KAAK,EAAC,UAAd;AAAyB,YAAA,GAAG,EAAG,GAAElC,aAAa,CAAC+C,MAAd,CAAqBC,gBAAiB,gBAAenB,WAAY,kBAAiBE,cAAe,EAAlI;AAAqI,YAAA,KAAK,EAAC,MAA3I;AAAkJ,YAAA,MAAM,EAAC,MAAzJ;AAAgK,YAAA,KAAK,EAAE;AAAEkB,cAAAA,MAAM,EAAE,CAAV;AAAaC,cAAAA,MAAM,EAAC,CAApB;AAAuBC,cAAAA,MAAM,EAAE;AAA/B,aAAvK;AAA6N,YAAA,eAAe,EAAE;AAA9O;AAAA;AAAA;AAAA;AAAA,kBAdF;AAAA,wBADD,gBAkBC;AAAA,iCAAE;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAF;AAnBJ;AAAA;AAAA;AAAA;AAAA,cADY,gBAwBZ;AAAA,+BAAE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAF;AAzBJ;AAPJ,mBADF;AAyCD;;GAhJQ3D,gB;UACWR,S,EACCE,a,EACKC,kB,EACTF,W;;;KAJRO,gB;AAkJT,eAAeA,gBAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useAuthHeader, useIsAuthenticated } from 'react-auth-kit';\nimport Platform from 'react-platform-js';\nimport axios from \"axios\";\nimport UnauthenticatedPage from \"../errors/Unauthorized\";\nimport { API_ENDPOINT } from '../common/Constants';\n\nfunction ThreeDSystemPage() {\n  let { id, sdk } = useParams();\n  const authHeader = useAuthHeader();\n  const isAuthenticated = useIsAuthenticated();\n  let navigate = useNavigate();\n  const [projectStreamLoading, setProjectStreamLoading] = useState(false);\n  const [projectStream, setProjectStream] = useState(null);\n\n  useEffect(() => {\n    fetchProjectStream();\n    console.log(\"Platform \", Platform);\n  }, []);\n\n\n  if (!isAuthenticated()) {\n    // Redirect to login\n    console.log(\"valid Redirect to login\");\n    return (\n      <>\n        <UnauthenticatedPage />\n        {/* <Navigate to=\"/401\" replace /> */}\n      </>\n    );\n  }\n\n\n  async function fetchProjectStream() {\n    setProjectStreamLoading(true);\n    let postData = {\n      test: null,\n      project_id: id\n    };\n    try {\n\n      const res = await axios.post(API_ENDPOINT + \"vagon/getStream\", postData, { headers: { Authorization: authHeader() } });\n      if (res.data.data) {\n        setProjectStreamLoading(false);\n        setProjectStream(res.data.data);\n      }\n    } catch (error) {\n      console.error(\"error \", error);\n      setProjectStreamLoading(false);\n\n      if (error.response.status === 422) {\n        console.log(\"errors data \", error.response.data.errors);\n        let errors = error.response.data.errors;\n        if (errors.client_code === 4601) {\n          alert(\"Insufficient Capacity. Please try again later.\");\n        }\n        // console.log(\"error \\n\", error.response.data.message)\n        // setFormValidationErrors(error.response.data.errors);\n        // setFormErrors(error.response.data.message);\n        // setTimeout(() => {\n        //     setFormValidationErrors({});\n        //     setFormErrors('');\n        // }, 5000);\n      }\n\n    }\n  }\n\n\n  const mobileCheck = () => {\n    let check = false;\n    (function (a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipad|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\n    return check;\n  };\n\n\n\n  // 896.992\n  //const userId = auth().user.id;\n  const token = authHeader();\n  const simpleToken = token.replace('Bearer ', '-token%20');\n\n  let devicePlatform = '';\n  if (Platform.OS === 'Android' && Platform.DeviceType === 'mobile')\n    devicePlatform = 'Android';\n  else if (Platform.OS === 'iOS' && Platform.DeviceType === 'mobile')\n    devicePlatform = 'iPhone';\n  else if (Platform.OS === 'iOS' && Platform.DeviceType === 'tablet')\n    devicePlatform = 'iPad';\n  else\n    devicePlatform = 'Desktop';\n\n    function openFullscreen() {\n      var elem = document.getElementsByTagName(\"iframe\")[0];//document.getElementById(\"twoDSales\");\n  \n      if (elem.requestFullscreen) {\n        elem.requestFullscreen();\n      } else if (elem.webkitRequestFullscreen) { /* Safari */\n        elem.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      } else if (elem.msRequestFullscreen) { /* IE11 */\n        elem.msRequestFullscreen();\n      } else if (elem.mozRequestFullScreen) { /* moz */\n        elem.mozRequestFullScreen();\n      } else if (elem.webkitEnterFullScreen) {\n        elem.webkitEnterFullScreen();\n      } else {\n        //elem.webkitEnterFullscreen();\n        alert('The requested browser does not support full-screen mode.');\n      }\n    }\n  return (\n    <>\n\n      {projectStreamLoading ?\n        <>\n          <div className=\"text-center\">Loading...</div>\n        </>\n        :\n        <>\n          {projectStream ?\n            <div>\n              {projectStream.project.is_3d_enabled ?\n                <>\n                  <div className=\"col-auto twoDbackBtn\">\n                    <button title=\"Back\" className=\"cusocialBackBtn\" onClick={() => navigate(-1)}>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-arrow-left\" viewBox=\"0 0 16 16\">\n                        <path fillRule=\"evenodd\" d=\"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z\" />\n                      </svg>\n                    </button>\n                    &nbsp;\n                    <button title=\"FullScreen\" className=\"cusocialBackBtn\" onClick={() => openFullscreen()}>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-fullscreen\" viewBox=\"0 0 16 16\">\n                        <path d=\"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z\" />\n                      </svg>\n                    </button>\n                  </div>\n                  <iframe title=\"3Dstream\" src={`${projectStream.stream.vagon_stream_url}?launchFlags=${simpleToken}%20-platform%20${devicePlatform}`} width=\"100%\" height=\"100%\" style={{ border: 0, margin:0, height: 'calc(100vh - 8px)' }} allowFullScreen={true} ></iframe>\n                </>\n                :\n                <><div className=\"text-center\">3d system is not available.</div></>\n              }\n            </div>\n            :\n            <><div className=\"text-center\">No data available.</div></>\n          }\n        </>\n      }\n\n      {/* <iframe title=\"3Dstream\" src={`https://furioos.cubedots.com/?playerId=${sdk}&token=${simpleToken}`} width=\"100%\" height=\"100%\" frameBorder=\"0\" style={{ border: 0 , height:'calc(100vh - 50px)'}} loading=\"lazy\" allowFullScreen=\"\" aria-hidden=\"false\" tabIndex=\"0\"></iframe> */}\n    </>\n  );\n}\n\nexport default ThreeDSystemPage;"]},"metadata":{},"sourceType":"module"}