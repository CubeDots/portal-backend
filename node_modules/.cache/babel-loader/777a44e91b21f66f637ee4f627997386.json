{"ast":null,"code":"import _objectSpread from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import Spinner from'react-bootstrap/Spinner';import{useIsAuthenticated}from\"react-auth-kit\";import Modal from\"react-bootstrap/Modal\";import{API_ENDPOINT}from\"../common/Constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ForgotPasswordModal(props){var publicPath=process.env.PUBLIC_URL;var isAuthenticated=useIsAuthenticated();var navigate=useNavigate();var handleClose=function handleClose(){setShowfp(false);// props.handleChanel();\nconsole.log(\"handleClose clicked \",showfp);};var handleShow=function handleShow(){setShowfp(true);console.log(\"handleShow clicked \",showfp);};var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),showfp=_React$useState2[0],setShowfp=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),loading=_React$useState4[0],setLoading=_React$useState4[1];var _React$useState5=React.useState({email:''}),_React$useState6=_slicedToArray(_React$useState5,2),formData=_React$useState6[0],setFormData=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),formErrors=_React$useState8[0],setFormErrors=_React$useState8[1];// const [formValidationErrors, setFormValidationErrors] = React.useState({});\nuseEffect(function(){handleShow();if(!showfp){props.handleChanel();}},[props,showfp]);var onSubmit=function onSubmit(e){e.preventDefault();setLoading(true);// setFormErrors('');\n// setFormValidationErrors({});\naxios.post(API_ENDPOINT+\"auth/forgetPassword\",formData).then(function(res){setLoading(false);console.log('forgetPassword res',res.status,res.data);if(res.status===200){//setFormErrors(res.data.message);\nalert(res.data.message);setFormData(function(fd){return _objectSpread(_objectSpread({},fd),{},{email:''});});setTimeout(function(){setFormErrors('');navigate(\"/\");},5000);}}).catch(function(error){setLoading(false);console.log(\"errors ### \",error.response);if(error.response.status===422){console.log(\"errors data \",error.response.data.errors);//let errorm = error.response.data.errors[0];\nconsole.log(\"error \\n\",error.response.data.message);var formValidationErrors=error.response.data.errors;var msg=error.response.data.message+\"\\n\\n\";formValidationErrors&&Object.keys(formValidationErrors).map(function(error,index){msg+=formValidationErrors[error][0];});alert(msg);// setFormValidationErrors(error.response.data.errors);\n// setFormErrors(error.response.data.message);\nsetTimeout(function(){// setFormValidationErrors({});\n// setFormErrors('');\n},5000);}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Modal,{show:true,onHide:handleClose,className:\"forgot-password\",backdrop:\"static\",keyboard:false,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{className:\"p-2\",closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Forgot Password\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"forgotpasswordForm\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Please enter your registed email address with Cubedots\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",placeholder:\"Email Address\",value:formData.email,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value}));}})}),loading?/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",type:\"button\",disabled:true,children:[/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}),\"  Submitting...\"]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",children:\"Submit\"})]})})})]})});}export default ForgotPasswordModal;","map":{"version":3,"sources":["/var/www/html/cuengine-portal/src/components/ForgotPasswordModal.js"],"names":["React","useEffect","useNavigate","axios","Spinner","useIsAuthenticated","Modal","API_ENDPOINT","ForgotPasswordModal","props","publicPath","process","env","PUBLIC_URL","isAuthenticated","navigate","handleClose","setShowfp","console","log","showfp","handleShow","useState","loading","setLoading","email","formData","setFormData","formErrors","setFormErrors","handleChanel","onSubmit","e","preventDefault","post","then","res","status","data","alert","message","fd","setTimeout","catch","error","response","errors","formValidationErrors","msg","Object","keys","map","index","target","value"],"mappings":"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","sourcesContent":["\nimport React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Spinner from 'react-bootstrap/Spinner';\nimport {useIsAuthenticated } from \"react-auth-kit\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { API_ENDPOINT } from \"../common/Constants\";\n\nfunction ForgotPasswordModal(props) {\n    let publicPath = process.env.PUBLIC_URL;\n\n    const isAuthenticated = useIsAuthenticated();\n    const navigate = useNavigate();\n\n    const handleClose = () => {\n        setShowfp(false);\n        // props.handleChanel();\n        console.log(\"handleClose clicked \", showfp);\n    }\n    const handleShow = () => {\n        setShowfp(true);\n        console.log(\"handleShow clicked \", showfp);\n    }\n    const [showfp, setShowfp] = React.useState(true);\n\n    const [loading, setLoading] = React.useState(false);\n    const [formData, setFormData] = React.useState({ email: '' });\n    const [formErrors, setFormErrors] = React.useState('');\n   // const [formValidationErrors, setFormValidationErrors] = React.useState({});\n\n    useEffect(() => {\n        handleShow();\n\n        if (!showfp) {\n            props.handleChanel();\n        }\n    }, [props, showfp]);\n\n\n    const onSubmit = (e) => {\n        e.preventDefault()\n        setLoading(true);\n        // setFormErrors('');\n        // setFormValidationErrors({});\n        axios.post(API_ENDPOINT + \"auth/forgetPassword\", formData)\n            .then((res) => {\n                setLoading(false);\n                console.log('forgetPassword res', res.status, res.data)\n                if (res.status === 200) {\n                    //setFormErrors(res.data.message);\n                    alert(res.data.message);\n                    setFormData(fd => ({ ...fd, email: '' }));\n                    setTimeout(() => {\n                        setFormErrors('');\n                        navigate(\"/\");\n                    }, 5000);\n                }\n            }).catch((error) => {\n                setLoading(false);\n                console.log(\"errors ### \", error.response);\n                if (error.response.status === 422) {\n                    console.log(\"errors data \", error.response.data.errors);\n                    //let errorm = error.response.data.errors[0];\n                    console.log(\"error \\n\", error.response.data.message);\n                    let  formValidationErrors = error.response.data.errors;\n                    let msg =error.response.data.message+\"\\n\\n\";\n                    formValidationErrors && Object.keys(formValidationErrors).map((error, index) => {\n                        msg += formValidationErrors[error][0];\n                    });\n                    alert(msg);\n\n                    // setFormValidationErrors(error.response.data.errors);\n                    // setFormErrors(error.response.data.message);\n                    setTimeout(() => {\n                        // setFormValidationErrors({});\n                        // setFormErrors('');\n                    }, 5000);\n                }\n            })\n    }\n\n\n    return (\n        <>\n\n            <Modal show={true} onHide={handleClose} className=\"forgot-password\" backdrop=\"static\" keyboard={false} centered>\n                <Modal.Header className='p-2' closeButton>\n                <Modal.Title>Forgot Password</Modal.Title>\n                </Modal.Header>\n                <div className=\"modal-body\">\n                    <div className=\"forgotpasswordForm\">\n                       \n                        <form onSubmit={onSubmit}>\n                            <div className=\"mb-3\">\n                               <p>Please enter your registed email address with Cubedots</p>\n                            </div>\n                            <div className=\"mb-3\">\n                                <input type=\"email\" className=\"form-control\" name=\"email\" placeholder=\"Email Address\" value={formData.email} onChange={(e) => setFormData({ ...formData, email: e.target.value })} />\n                            </div>\n                            {loading ?\n                                <button className=\"btn btn-primary\" type=\"button\" disabled >\n                                    <Spinner as=\"span\" animation=\"border\" size=\"sm\" role=\"status\" aria-hidden=\"true\" />  Submitting...\n                                </button>\n                                :\n                                <button className=\"btn btn-primary\" type=\"submit\">Submit</button>\n                            }\n\n                        </form>\n                    </div>\n                </div>\n            </Modal>\n        </>\n    );\n}\n\nexport default ForgotPasswordModal;"]},"metadata":{},"sourceType":"module"}