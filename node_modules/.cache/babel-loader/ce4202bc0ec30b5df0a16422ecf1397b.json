{"ast":null,"code":"import _regeneratorRuntime from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import axios from\"axios\";import{useAuthUser,useAuthHeader}from'react-auth-kit';import Spinner from'react-bootstrap/Spinner';import{API_ENDPOINT}from\"../../common/Constants\";import Modal from'react-bootstrap/Modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function CreateAppointment(props){var authHeader=useAuthHeader();var auth=useAuthUser();var publicPath=process.env.PUBLIC_URL;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),countriesLoading=_useState2[0],setCountriesLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),countries=_useState4[0],setCountries=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),locationsLoading=_useState6[0],setLocationsLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),locations=_useState8[0],setLocations=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState({first_name:null,last_name:null,email:null,country:null,mobile:null,appointment_date:null,appointment_time:null,location:null}),_useState12=_slicedToArray(_useState11,2),formData=_useState12[0],setFormData=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),securityCode=_useState14[0],setSecurityCode=_useState14[1];useEffect(function(){genRandomString();setLoading(false);fetchCountries();fetchLocations();},[]);function fetchLocations(){return _fetchLocations.apply(this,arguments);}function _fetchLocations(){_fetchLocations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLocationsLoading(true);_context.prev=1;_context.next=4;return axios.post(API_ENDPOINT+\"orgzit/projects\",'',{headers:{Authorization:authHeader()}});case 4:res=_context.sent;if(res.data){//console.log(\"res.data \",res.data.data);\nsetLocationsLoading(false);setLocations(res.data.data);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);//console.error(\"error \", error);\nsetLocationsLoading(false);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return _fetchLocations.apply(this,arguments);}var handleChangeLocation=function handleChangeLocation(e){e.persist();var selectedLocationName=e.target.value;setFormData(function(formData){return _objectSpread(_objectSpread({},formData),{},{location:selectedLocationName});});var locationsList=locations;/*let newDialCode = Object.keys(locationsList).filter((x) => {\n            return locationsList[x].location_name === selectedCountryName;\n        }).map((x) => {\n            return locationsList[x].dial_code;\n        });*/};function fetchCountries(){return _fetchCountries.apply(this,arguments);}function _fetchCountries(){_fetchCountries=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setCountriesLoading(true);_context2.prev=1;_context2.next=4;return axios.get(publicPath+\"/assets/data/countries.json\");case 4:res=_context2.sent;if(res.data){//console.log(\"res.data \",res.data.data);\nsetCountriesLoading(false);setCountries(res.data.data);}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);//console.error(\"error \", error);\nsetCountriesLoading(false);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return _fetchCountries.apply(this,arguments);}var handleChangeCountry=function handleChangeCountry(e){e.persist();var selectedCountryName=e.target.value;setFormData(function(formData){return _objectSpread(_objectSpread({},formData),{},{country:selectedCountryName});});var countriesList=countries;var newDialCode=Object.keys(countriesList).filter(function(x){return countriesList[x].country_name===selectedCountryName;}).map(function(x){return countriesList[x].dial_code;});var dial_code=newDialCode.length?newDialCode[0]:'';setFormData(function(formData){return _objectSpread(_objectSpread({},formData),{},{dial_code:dial_code});});};var handleChangeTerms=function handleChangeTerms(status){//console.log(\"terms \",status);\nsetFormData(function(formData){return _objectSpread(_objectSpread({},formData),{},{terms:status});});};var genRandomString=function genRandomString(){var text=\"\";var length=6;var possible=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";for(var i=0;i<length;i++){text+=possible.charAt(Math.floor(Math.random()*possible.length));}setSecurityCode(text);return text;};var resetFrom=function resetFrom(){setFormData({first_name:null,last_name:null,email:null,country:null,mobile:null,appointment_date:null,appointment_time:null,location:null});document.getElementById(\"form1\").reset();};var onSubmit=function onSubmit(e){e.preventDefault();//console.log(\"formData \", formData);        \nif(formData.country===null){alert(\"Please select country name.\");return false;}if(formData.mobile===null){alert(\"Please enter mobile number.\");return false;}if(formData.appointment_date===null){alert(\"Please select appointment date.\");return false;}if(formData.appointment_time===null){alert(\"Please select appointment time.\");return false;}if(formData.location===null){alert(\"Please select Location name.\");return false;}setLoading(true);axios.post(API_ENDPOINT+'orgzit/create_appointment',formData,{headers:{Authorization:authHeader()}}).then(function(res){//console.log('res ### ', res.status, res.data)                \nif(res.status===200){setLoading(false);genRandomString();resetFrom();setTimeout(function(){alert(res.data.message);window.location.reload();},1000);}}).catch(function(error){setLoading(false);//console.log(\"errors ### \", error);\nif(error){//alert(error.response.status);\nif(error.response.status===422){var errors=error.response.data.errors.errors;var msg=error.response.data.message+\"\\n\";Object.keys(errors).map(function(row,index){msg+=\"\\n\"+errors[row].error+\"\\n\";});alert(msg);}}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Modal,_objectSpread(_objectSpread({},props),{},{className:\"enrollmentModal\",backdrop:\"static\",keyboard:false,size:\"md\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\"})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"p-3 enrollmentModal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row align-items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"enrollmentContent\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Create Appointment\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"form1\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col mb-3\",children:/*#__PURE__*/_jsx(\"input\",{value:auth().user.name,className:\"form-control\",type:\"text\",placeholder:\"Full Name\",name:\"first_name\",defaultValue:formData.first_name,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{first_name:e.target.value}));}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col mb-3\",children:/*#__PURE__*/_jsx(\"input\",{value:auth().user.email,className:\"form-control\",type:\"text\",placeholder:\"Email Address\",name:\"email\",defaultValue:formData.email,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value}));}})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col mb-3\",children:countries.length>0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",placeholder:\"Country\",name:\"country\",onChange:handleChangeCountry,defaultValue:formData.country_name,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Country\"}),countries.length>0&&countries.map(function(row,index){return/*#__PURE__*/_jsx(\"option\",{value:row.country_name,children:row.country_name},index);})]})}):null})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"basic-addon1\",children:formData.dial_code?formData.dial_code:'+91'}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",placeholder:\"Mobile No.\",name:\"mobile\",defaultValue:formData.mobile,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{mobile:e.target.value}));}})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"mb-1\",children:\"Appointment Date\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"date\",placeholder:\"Appointment Date\",name:\"appointment_date\",defaultValue:formData.appointment_date,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{appointment_date:e.target.value}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"mb-1\",children:\"Appointment Time\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"time\",placeholder:\"Appointment Time\",name:\"appointment_time\",defaultValue:formData.appointment_time,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{appointment_time:e.target.value}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col mb-3\",children:locations.length>0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",placeholder:\"Location\",name:\"location\",onChange:handleChangeLocation,defaultValue:formData.location_name,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Location\"}),locations.length>0&&locations.map(function(row,index){return/*#__PURE__*/_jsx(\"option\",{value:row.OrgzitRecordId,children:row.ProjectName},index);})]})}):null})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:loading?/*#__PURE__*/_jsxs(\"button\",{className:\"btntheme\",type:\"button\",disabled:true,children:[/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}),\"  Submitting...\"]}):/*#__PURE__*/_jsx(\"button\",{className:\"btntheme\",type:\"submit\",children:\"Submit\"})})})]})]})})})})]}))});}export default CreateAppointment;","map":{"version":3,"sources":["/var/www/html/cuengine-portal/src/components/dashboard/CreateAppointment.js"],"names":["useEffect","useState","axios","useAuthUser","useAuthHeader","Spinner","API_ENDPOINT","Modal","CreateAppointment","props","authHeader","auth","publicPath","process","env","PUBLIC_URL","countriesLoading","setCountriesLoading","countries","setCountries","locationsLoading","setLocationsLoading","locations","setLocations","loading","setLoading","first_name","last_name","email","country","mobile","appointment_date","appointment_time","location","formData","setFormData","securityCode","setSecurityCode","genRandomString","fetchCountries","fetchLocations","post","headers","Authorization","res","data","handleChangeLocation","e","persist","selectedLocationName","target","value","locationsList","get","handleChangeCountry","selectedCountryName","countriesList","newDialCode","Object","keys","filter","x","country_name","map","dial_code","length","handleChangeTerms","status","terms","text","possible","i","charAt","Math","floor","random","resetFrom","document","getElementById","reset","onSubmit","preventDefault","alert","then","setTimeout","message","window","reload","catch","error","response","errors","msg","row","index","user","name","location_name","OrgzitRecordId","ProjectName"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport { useAuthUser, useAuthHeader } from 'react-auth-kit';\nimport Spinner from 'react-bootstrap/Spinner';\nimport { API_ENDPOINT } from \"../../common/Constants\";\nimport Modal from 'react-bootstrap/Modal';\n\n\nfunction CreateAppointment(props) {\n    const authHeader = useAuthHeader();\n    const auth = useAuthUser();\n    let publicPath = process.env.PUBLIC_URL;\n\n    const [countriesLoading, setCountriesLoading] = useState(false);\n    const [countries, setCountries] = useState([]);\n\n    const [locationsLoading, setLocationsLoading] = useState(false);\n    const [locations, setLocations] = useState([]);\n\n    const [loading, setLoading] = useState(false);\n    const [formData, setFormData] = useState({ first_name: null, last_name: null, email: null, country: null, mobile: null, appointment_date: null, appointment_time: null,location: null });\n    const [securityCode, setSecurityCode] = useState(null);\n\n    useEffect(() => {\n\n        genRandomString();\n        setLoading(false);\n        fetchCountries();\n        fetchLocations();\n\n    }, []);\n\n    async function fetchLocations() {\n        setLocationsLoading(true);\n        try {\n            //const res = await axios.get(publicPath + \"/assets/data/countries.json\");\n            const res = await axios.post(API_ENDPOINT + \"orgzit/projects\", '', { headers: { Authorization: authHeader() } });\n            if (res.data) {\n                //console.log(\"res.data \",res.data.data);\n                setLocationsLoading(false);\n                setLocations(res.data.data);\n            }\n        } catch (error) {\n            //console.error(\"error \", error);\n            setLocationsLoading(false);\n        }\n    }\n\n    const handleChangeLocation = (e) => {\n        e.persist();\n        let selectedLocationName = e.target.value;\n        setFormData(formData => ({ ...formData, location: selectedLocationName }));\n        let locationsList = locations;\n        /*let newDialCode = Object.keys(locationsList).filter((x) => {\n            return locationsList[x].location_name === selectedCountryName;\n        }).map((x) => {\n            return locationsList[x].dial_code;\n        });*/        \n    }\n\n    async function fetchCountries() {\n        setCountriesLoading(true);\n        try {\n            const res = await axios.get(publicPath + \"/assets/data/countries.json\");\n            if (res.data) {\n                //console.log(\"res.data \",res.data.data);\n                setCountriesLoading(false);\n                setCountries(res.data.data);\n            }\n        } catch (error) {\n            //console.error(\"error \", error);\n            setCountriesLoading(false);\n        }\n    }\n\n    const handleChangeCountry = (e) => {\n        e.persist();\n        let selectedCountryName = e.target.value;\n        setFormData(formData => ({ ...formData, country: selectedCountryName }));\n        let countriesList = countries;\n        let newDialCode = Object.keys(countriesList).filter((x) => {\n            return countriesList[x].country_name === selectedCountryName;\n        }).map((x) => {\n            return countriesList[x].dial_code;\n        });\n        let dial_code = newDialCode.length ? newDialCode[0] : '';        \n        setFormData(formData => ({ ...formData, dial_code: dial_code }));        \n    }\n\n    const handleChangeTerms = (status) => {\n        //console.log(\"terms \",status);\n        setFormData(formData => ({ ...formData, terms: status }));\n    }  \n\n    const genRandomString = () => {\n        var text = \"\";\n        var length = 6;\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n        for (var i = 0; i < length; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        setSecurityCode(text);\n        return text;\n    }\n\n    const resetFrom = () => {\n        setFormData({ first_name: null, last_name: null, email: null, country: null, mobile: null, appointment_date: null, appointment_time: null,location: null });\n\n        document.getElementById(\"form1\").reset();\n    }\n\n    const onSubmit = (e) => {\n        e.preventDefault();\n        //console.log(\"formData \", formData);        \n        if (formData.country === null) {\n            alert(\"Please select country name.\");\n            return false;\n        }        \n        if (formData.mobile === null) {\n            alert(\"Please enter mobile number.\");\n            return false;\n        }\n        if (formData.appointment_date === null) {\n            alert(\"Please select appointment date.\");\n            return false;\n        }\n        if (formData.appointment_time === null) {\n            alert(\"Please select appointment time.\");\n            return false;\n        }\n        if (formData.location === null) {\n            alert(\"Please select Location name.\");\n            return false;\n        }\n        \n        setLoading(true);\n\n        axios.post(API_ENDPOINT + 'orgzit/create_appointment', formData, { headers: { Authorization: authHeader() } })\n            .then((res) => {\n                //console.log('res ### ', res.status, res.data)                \n                \n                if (res.status === 200) {\n                    setLoading(false);\n                    genRandomString();\n                    resetFrom();\n                    setTimeout(() => {\n                        alert(res.data.message);\n                        window.location.reload();\n                    }, 1000);\n                }\n            }).catch((error) => {\n                setLoading(false);\n                //console.log(\"errors ### \", error);\n                if (error) {\n                    //alert(error.response.status);\n                    if (error.response.status === 422) {\n                        let errors = error.response.data.errors.errors;                        \n                        let msg = error.response.data.message + \"\\n\";\n                        Object.keys(errors).map((row, index) => {                            \n                            msg += \"\\n\" +errors[row].error + \"\\n\"\n                        });\n                        alert(msg);\n                    }\n                }\n\n            })\n    }\n\n    return (\n        <>\n            <Modal {...props} className=\"enrollmentModal\" backdrop=\"static\" keyboard={false} size=\"md\" aria-labelledby=\"contained-modal-title-vcenter\" centered>\n                <Modal.Header closeButton>\n                    <Modal.Title id=\"contained-modal-title-vcenter\">\n                    </Modal.Title>\n                </Modal.Header>\n                <Modal.Body className=\"p-3 enrollmentModal\">\n                    <div className=\"row align-items-center\">                        \n                        <div className=\"col-md-12\">\n                            <div className=\"enrollmentContent\">\n                                \n                                <h4>Create Appointment</h4>\n\n                                <form id=\"form1\" onSubmit={onSubmit}>\n\n                                    <div className=\"row\">\n                                        <div className=\"col mb-3\">\n                                            <input value={auth().user.name} className=\"form-control\" type=\"text\" placeholder=\"Full Name\" name=\"first_name\" defaultValue={formData.first_name} onChange={(e) => setFormData({ ...formData, first_name: e.target.value })} />\n                                        </div>                                        \n                                    </div>\n\n                                    <div className=\"row\">\n                                        <div className=\"col mb-3\">\n                                            <input value={auth().user.email} className=\"form-control\" type=\"text\" placeholder=\"Email Address\" name=\"email\" defaultValue={formData.email} onChange={(e) => setFormData({ ...formData, email: e.target.value })} />\n                                        </div>\n                                    </div>\n\n                                    <div className=\"row\">\n                                        <div className=\"col mb-3\">\n                                            {countries.length > 0 ?\n                                                <>\n                                                    <select className=\"form-select\" placeholder=\"Country\" name=\"country\" onChange={handleChangeCountry} defaultValue={formData.country_name}>\n                                                        <option value=\"\">Select Country</option>\n                                                        {countries.length > 0 && countries.map((row, index) => <option value={row.country_name} key={index} >{row.country_name}</option>)}\n                                                    </select>\n                                                </>\n                                                : null}\n\n                                        </div>\n                                    </div>\n\n                                    <div className=\"row\">\n                                        <div className=\"col mb-3\">\n                                            <div className=\"input-group\">\n                                                <span className=\"input-group-text\" id=\"basic-addon1\">{formData.dial_code ? formData.dial_code : '+91'}</span>\n                                                <input className=\"form-control\" type=\"text\" placeholder=\"Mobile No.\"\n                                                    name=\"mobile\" defaultValue={formData.mobile} onChange={(e) => setFormData({ ...formData, mobile: e.target.value })} />\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    \n                                    <div className=\"row\">\n                                        <div className=\"col mb-3\">\n                                            <label className='mb-1'>Appointment Date</label>\n                                            <input className=\"form-control\" type=\"date\" placeholder=\"Appointment Date\" name=\"appointment_date\" defaultValue={formData.appointment_date} onChange={(e) => setFormData({ ...formData, appointment_date: e.target.value })} />\n                                        </div>\n                                    </div>\n\n                                    <div className=\"row\">\n                                        <div className=\"col mb-3\">\n                                            <label className='mb-1'>Appointment Time</label>\n                                            <input className=\"form-control\" type=\"time\" placeholder=\"Appointment Time\" name=\"appointment_time\" defaultValue={formData.appointment_time} onChange={(e) => setFormData({ ...formData, appointment_time: e.target.value })} />\n                                        </div>\n                                    </div>\n\n                                    <div className=\"row\">\n                                        <div className=\"col mb-3\">\n                                            {locations.length > 0 ?\n                                                <>\n                                                    <select className=\"form-select\" placeholder=\"Location\" name=\"location\" onChange={handleChangeLocation} defaultValue={formData.location_name}>\n                                                        <option value=\"\">Select Location</option>\n                                                        {locations.length > 0 && locations.map((row, index) => <option value={row.OrgzitRecordId} key={index} >{row.ProjectName}</option>)}\n                                                    </select>\n                                                </>\n                                                : null}\n\n                                        </div>\n                                    </div>\n\n                                    <div className=\"row\">\n                                        <div className=\"col\">                                            \n                                            {loading ?\n                                                <button className=\"btntheme\" type=\"button\" disabled >\n                                                    <Spinner as=\"span\" animation=\"border\" size=\"sm\" role=\"status\" aria-hidden=\"true\" />  Submitting...\n                                                </button>\n                                                :\n                                                <button className=\"btntheme\" type=\"submit\">Submit</button>\n                                            }\n\n                                        </div>\n\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n\n                </Modal.Body>\n            </Modal>\n        </>\n    );\n}\n\nexport default CreateAppointment;"]},"metadata":{},"sourceType":"module"}