{"ast":null,"code":"import _objectSpread from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/var/www/html/cuengine-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import axios from'axios';import Spinner from'react-bootstrap/Spinner';import{API_ENDPOINT}from\"../common/Constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function RestPasswordPage(){var publicPath=process.env.PUBLIC_URL;var navigate=useNavigate();var _useParams=useParams(),token=_useParams.token,email=_useParams.email;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=React.useState({email:'',password:'',password_confirmation:''}),_React$useState4=_slicedToArray(_React$useState3,2),formData=_React$useState4[0],setFormData=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),formErrors=_React$useState6[0],setFormErrors=_React$useState6[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),formValidationErrors=_React$useState8[0],setFormValidationErrors=_React$useState8[1];useEffect(function(){window.scrollTo({top:0,left:0,behavior:'smooth'});setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{email:email});});},[email]);var onSubmit=function onSubmit(e){e.preventDefault();setLoading(true);console.log(\"formData \",email,formData);formData['email']=email;formData['token']=token;axios.post(API_ENDPOINT+\"auth/resetPassword\",formData).then(function(res){setLoading(false);console.log('resetPassword res',res.status,res.data);if(res.status===200){setFormErrors(res.data.message);setFormData(function(fd){return _objectSpread(_objectSpread({},fd),{},{email:'',password:'',password_confirmation:''});});setTimeout(function(){setFormErrors('');navigate(\"/\");},5000);}}).catch(function(error){setLoading(false);console.log(\"errors ### \",error);if(error){if(error.response.status===422){console.log(\"errors data \",error.response.data.errors);//let errorm = error.response.data.errors[0];\nconsole.log(\"error \\n\",error.response.data.message);setFormValidationErrors(error.response.data.errors);//setFormErrors(error.response.data.message);\nsetTimeout(function(){setFormValidationErrors({});setFormErrors('');},5000);}}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"mt-70\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center my-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Reset Password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[formErrors?/*#__PURE__*/_jsx(\"p\",{className:formValidationErrors.length?'text-danger':'text-success',children:formErrors}):'',/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled\",children:formValidationErrors&&Object.keys(formValidationErrors).map(function(error,index){return/*#__PURE__*/_jsx(\"li\",{className:\"text-danger\",children:formValidationErrors[error][0]},index);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",placeholder:\"Email\",value:email,readOnly:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password\",placeholder:\"New Password\",value:formData.password,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{password:e.target.value}));}})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"password_confirmation\",placeholder:\"Confirm Password\",value:formData.password_confirmation,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{password_confirmation:e.target.value}));}})}),loading?/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",type:\"button\",disabled:true,children:[/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"border\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}),\"  Submitting...\"]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",children:\"Submit\"})]})]})})})})});}export default RestPasswordPage;","map":{"version":3,"sources":["/var/www/html/cuengine-portal/src/pages/RestPasswordPage.js"],"names":["React","useEffect","useNavigate","useParams","axios","Spinner","API_ENDPOINT","RestPasswordPage","publicPath","process","env","PUBLIC_URL","navigate","token","email","useState","loading","setLoading","password","password_confirmation","formData","setFormData","formErrors","setFormErrors","formValidationErrors","setFormValidationErrors","window","scrollTo","top","left","behavior","prevState","onSubmit","e","preventDefault","console","log","post","then","res","status","data","message","fd","setTimeout","catch","error","response","errors","length","Object","keys","map","index","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport Spinner from 'react-bootstrap/Spinner';\nimport { API_ENDPOINT } from \"../common/Constants\";\n\nfunction RestPasswordPage() {\n    let publicPath = process.env.PUBLIC_URL;\n\n    const navigate = useNavigate();\n    const { token, email } = useParams();\n\n    const [loading, setLoading] = React.useState(false);\n    const [formData, setFormData] = React.useState({ email: '', password: '', password_confirmation: '' });\n    const [formErrors, setFormErrors] = React.useState('');\n    const [formValidationErrors, setFormValidationErrors] = React.useState({});\n\n\n    useEffect(() => {\n        window.scrollTo({ top:0,left:0,behavior:'smooth'});\n        setFormData(prevState => ({\n            ...prevState,\n            email: email\n        }))\n    }, [email]);\n\n    const onSubmit = (e) => {\n        e.preventDefault()\n        setLoading(true);\n        console.log(\"formData \", email, formData);\n        formData['email'] = email;\n        formData['token'] = token;\n        axios.post(API_ENDPOINT + \"auth/resetPassword\", formData)\n            .then((res) => {\n                setLoading(false);\n                console.log('resetPassword res', res.status, res.data)\n                if (res.status === 200) {\n                    setFormErrors(res.data.message);\n                    setFormData(fd => ({ ...fd, email: '', password: '', password_confirmation: '' }));\n\n                    setTimeout(() => {\n                        setFormErrors('');\n                        navigate(\"/\");\n                    }, 5000);\n                }\n            }).catch((error) => {\n                setLoading(false);\n                console.log(\"errors ### \", error);\n                if(error){\n                    if (error.response.status === 422) {\n                        console.log(\"errors data \", error.response.data.errors);\n                        //let errorm = error.response.data.errors[0];\n                        console.log(\"error \\n\", error.response.data.message)\n                        setFormValidationErrors(error.response.data.errors);\n                        //setFormErrors(error.response.data.message);\n                        setTimeout(() => {\n                            setFormValidationErrors({});\n                            setFormErrors('');\n                        }, 5000);\n                    }\n                }\n            })\n    }\n\n\n    return (\n        <>\n            <div className=\"mt-70\">\n                <div className=\"container\">\n\n                    <div className=\"row justify-content-center my-5\">\n\n                        <div className=\"col-md-5\">\n                            <h3>Reset Password</h3>\n                            \n                            <form onSubmit={onSubmit}>\n                                <div className=\"mb-3\">\n\n                                    {formErrors ?\n                                        <p className={formValidationErrors.length ? 'text-danger' : 'text-success'}>{formErrors}</p>\n                                        : ''}\n                                    <ul className=\"list-unstyled\">\n                                        {formValidationErrors && Object.keys(formValidationErrors).map((error, index) => (\n                                            <li className=\"text-danger\" key={index}>{formValidationErrors[error][0]}</li>\n                                        ))}\n                                    </ul>\n                                </div>\n                                <div className=\"mb-3\">\n                                    <input type=\"email\" className=\"form-control\" name=\"email\" placeholder=\"Email\" value={email} readOnly={true} />\n                                </div>\n                                <div className=\"mb-3\">\n                                    <input type=\"password\" className=\"form-control\" name=\"password\" placeholder='New Password' value={formData.password} onChange={(e) => setFormData({ ...formData, password: e.target.value })} />\n                                </div>\n                                <div className=\"mb-3\">\n                                    <input type=\"password\" className=\"form-control\" name=\"password_confirmation\" placeholder='Confirm Password' value={formData.password_confirmation} onChange={(e) => setFormData({ ...formData, password_confirmation: e.target.value })} />\n                                </div>\n\n                                {loading ?\n                                    <button className=\"btn btn-primary\" type=\"button\" disabled >\n                                        <Spinner as=\"span\" animation=\"border\" size=\"sm\" role=\"status\" aria-hidden=\"true\" />  Submitting...\n                                    </button>\n                                    :\n                                    <button className=\"btn btn-primary\" type=\"submit\">Submit</button>\n                                }\n\n\n\n                            </form>\n\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default RestPasswordPage;"]},"metadata":{},"sourceType":"module"}